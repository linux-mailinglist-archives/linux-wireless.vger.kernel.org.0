Return-Path: <linux-wireless-owner@vger.kernel.org>
X-Original-To: lists+linux-wireless@lfdr.de
Delivered-To: lists+linux-wireless@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 6266229565F
	for <lists+linux-wireless@lfdr.de>; Thu, 22 Oct 2020 04:28:52 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2895057AbgJVC2u (ORCPT <rfc822;lists+linux-wireless@lfdr.de>);
        Wed, 21 Oct 2020 22:28:50 -0400
Received: from mailgw02.mediatek.com ([210.61.82.184]:43007 "EHLO
        mailgw02.mediatek.com" rhost-flags-OK-FAIL-OK-FAIL) by vger.kernel.org
        with ESMTP id S2895039AbgJVC2s (ORCPT
        <rfc822;linux-wireless@vger.kernel.org>);
        Wed, 21 Oct 2020 22:28:48 -0400
X-UUID: 58de92658bc44d2c86b03a43704682ad-20201022
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=mediatek.com; s=dk;
        h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-ID:Date:Subject:CC:To:From; bh=6DIi4jrF0FTlHlkYs7ELtzBT+M4M01UmW2wYqgK+a7s=;
        b=PXcuiwA1uwc9PLkyMqNW83fiatYgiaZLtrrOHb+s6jUUlMrXMYXB+WzSlYPcXzd9AKY2SreAneVSggYIk276vcdYv/Yf3IlZo26FtOIFFGfhrJPfjZUnNz83eEysqDSbDXYgMURTK94nsJYxO8N5Ww7rTpoXmAkop2BBeAscaEM=;
X-UUID: 58de92658bc44d2c86b03a43704682ad-20201022
Received: from mtkcas08.mediatek.inc [(172.21.101.126)] by mailgw02.mediatek.com
        (envelope-from <shayne.chen@mediatek.com>)
        (Cellopoint E-mail Firewall v4.1.14 Build 0819 with TLSv1.2 ECDHE-RSA-AES256-SHA384 256/256)
        with ESMTP id 534814301; Thu, 22 Oct 2020 10:28:41 +0800
Received: from mtkcas08.mediatek.inc (172.21.101.126) by
 mtkmbs06n1.mediatek.inc (172.21.101.129) with Microsoft SMTP Server (TLS) id
 15.0.1497.2; Thu, 22 Oct 2020 10:28:40 +0800
Received: from mtksdccf07.mediatek.inc (172.21.84.99) by mtkcas08.mediatek.inc
 (172.21.101.73) with Microsoft SMTP Server id 15.0.1497.2 via Frontend
 Transport; Thu, 22 Oct 2020 10:28:39 +0800
From:   Shayne Chen <shayne.chen@mediatek.com>
To:     Felix Fietkau <nbd@nbd.name>
CC:     linux-wireless <linux-wireless@vger.kernel.org>,
        Lorenzo Bianconi <lorenzo.bianconi@redhat.com>,
        Ryder Lee <ryder.lee@mediatek.com>,
        Evelyn Tsai <evelyn.tsai@mediatek.com>,
        linux-mediatek <linux-mediatek@lists.infradead.org>,
        Shayne Chen <shayne.chen@mediatek.com>
Subject: [PATCH v4 08/10] mt76: mt7915: implement testmode rx support
Date:   Thu, 22 Oct 2020 10:28:18 +0800
Message-ID: <20201022022820.3077-8-shayne.chen@mediatek.com>
X-Mailer: git-send-email 2.18.0
In-Reply-To: <20201022022820.3077-1-shayne.chen@mediatek.com>
References: <20201022022820.3077-1-shayne.chen@mediatek.com>
MIME-Version: 1.0
Content-Type: text/plain
X-MTK:  N
Content-Transfer-Encoding: base64
Precedence: bulk
List-ID: <linux-wireless.vger.kernel.org>
X-Mailing-List: linux-wireless@vger.kernel.org

U3VwcG9ydCB0ZXN0bW9kZSByeCBhbmQgZGlzcGxheSByeCBzdGF0aXN0aWMgYnkgcGFyc2luZyBS
WFYgcGFja2V0DQp0eXBlLCB3aGljaCBpcyBjdXJyZW50bHkgb25seSBlbmFibGVkIGluIHRlc3Rt
b2RlLg0KDQpSZXZpZXdlZC1ieTogUnlkZXIgTGVlIDxyeWRlci5sZWVAbWVkaWF0ZWsuY29tPg0K
U2lnbmVkLW9mZi1ieTogU2hheW5lIENoZW4gPHNoYXluZS5jaGVuQG1lZGlhdGVrLmNvbT4NCi0t
LQ0KdjI6IGNoYW5nZSBsYXN0X3NuciB0byB1OA0KdjM6IHVzZSBubGFfcHV0X3U4IGZvciBNVDc2
X1RNX1JYX0FUVFJfU05SDQogICAgY2hhbmdlIHNuciB2YXJpYWJsZSB0eXBlIHRvIHU4IGluIG10
NzkxNV9tYWNfZmlsbF9yeF92ZWN0b3INCnY0OiBkaXJlY3RseSBzZXQgcnggZmlsdGVyIHRvIHJl
ZyBmb3IgdGVzdG1vZGUgcngsIGFuZCByZXN0b3JlIGl0DQogICAgIHdoZW4gbGVhdmluZyB0ZXN0
bW9kZQ0KDQogLi4uL25ldC93aXJlbGVzcy9tZWRpYXRlay9tdDc2L210NzkxNS9kbWEuYyAgIHwg
IDMgKw0KIC4uLi9uZXQvd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9tdDc5MTUvbWFjLmMgICB8IDM4
ICsrKysrKysrKw0KIC4uLi9uZXQvd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9tdDc5MTUvbWFjLmgg
ICB8ICA1ICsrDQogLi4uL3dpcmVsZXNzL21lZGlhdGVrL210NzYvbXQ3OTE1L210NzkxNS5oICAg
IHwgIDcgKysNCiAuLi4vd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9tdDc5MTUvdGVzdG1vZGUuYyAg
fCA3NyArKysrKysrKysrKysrKysrKysrDQogNSBmaWxlcyBjaGFuZ2VkLCAxMzAgaW5zZXJ0aW9u
cygrKQ0KDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9t
dDc5MTUvZG1hLmMgYi9kcml2ZXJzL25ldC93aXJlbGVzcy9tZWRpYXRlay9tdDc2L210NzkxNS9k
bWEuYw0KaW5kZXggY2ZhMTJjNC4uZTE0ODE0ZCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvbmV0L3dp
cmVsZXNzL21lZGlhdGVrL210NzYvbXQ3OTE1L2RtYS5jDQorKysgYi9kcml2ZXJzL25ldC93aXJl
bGVzcy9tZWRpYXRlay9tdDc2L210NzkxNS9kbWEuYw0KQEAgLTYxLDYgKzYxLDkgQEAgdm9pZCBt
dDc5MTVfcXVldWVfcnhfc2tiKHN0cnVjdCBtdDc2X2RldiAqbWRldiwgZW51bSBtdDc2X3J4cV9p
ZCBxLA0KIAljYXNlIFBLVF9UWVBFX1JYX0VWRU5UOg0KIAkJbXQ3OTE1X21jdV9yeF9ldmVudChk
ZXYsIHNrYik7DQogCQlicmVhazsNCisJY2FzZSBQS1RfVFlQRV9UWFJYVjoNCisJCW10NzkxNV9t
YWNfZmlsbF9yeF92ZWN0b3IoZGV2LCBza2IpOw0KKwkJYnJlYWs7DQogCWNhc2UgUEtUX1RZUEVf
Tk9STUFMOg0KIAkJaWYgKCFtdDc5MTVfbWFjX2ZpbGxfcngoZGV2LCBza2IpKSB7DQogCQkJbXQ3
Nl9yeCgmZGV2LT5tdDc2LCBxLCBza2IpOw0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L3dpcmVs
ZXNzL21lZGlhdGVrL210NzYvbXQ3OTE1L21hYy5jIGIvZHJpdmVycy9uZXQvd2lyZWxlc3MvbWVk
aWF0ZWsvbXQ3Ni9tdDc5MTUvbWFjLmMNCmluZGV4IGM4N2QzYzMuLjQ5YWZkNWIgMTAwNjQ0DQot
LS0gYS9kcml2ZXJzL25ldC93aXJlbGVzcy9tZWRpYXRlay9tdDc2L210NzkxNS9tYWMuYw0KKysr
IGIvZHJpdmVycy9uZXQvd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9tdDc5MTUvbWFjLmMNCkBAIC01
NjIsNiArNTYyLDQ0IEBAIGludCBtdDc5MTVfbWFjX2ZpbGxfcngoc3RydWN0IG10NzkxNV9kZXYg
KmRldiwgc3RydWN0IHNrX2J1ZmYgKnNrYikNCiAJcmV0dXJuIDA7DQogfQ0KIA0KK3ZvaWQgbXQ3
OTE1X21hY19maWxsX3J4X3ZlY3RvcihzdHJ1Y3QgbXQ3OTE1X2RldiAqZGV2LCBzdHJ1Y3Qgc2tf
YnVmZiAqc2tiKQ0KK3sNCisjaWZkZWYgQ09ORklHX05MODAyMTFfVEVTVE1PREUNCisJX19sZTMy
ICpyeGQgPSAoX19sZTMyICopc2tiLT5kYXRhOw0KKwlfX2xlMzIgKnJ4diA9IHJ4ZCArIDQ7DQor
CXUzMiByY3BpLCBpYl9yc3NpLCB3Yl9yc3NpLCB2MjAsIHYyMTsNCisJczMyIGZvZTsNCisJdTgg
c25yOw0KKwlpbnQgaTsNCisNCisJcmNwaSA9IGxlMzJfdG9fY3B1KHJ4dls2XSk7DQorCWliX3Jz
c2kgPSBsZTMyX3RvX2NwdShyeHZbN10pOw0KKwl3Yl9yc3NpID0gbGUzMl90b19jcHUocnh2Wzhd
KSA+PiA1Ow0KKw0KKwlmb3IgKGkgPSAwOyBpIDwgNDsgaSsrLCByY3BpID4+PSA4LCBpYl9yc3Np
ID4+PSA4LCB3Yl9yc3NpID4+PSA5KSB7DQorCQlpZiAoaSA9PSAzKQ0KKwkJCXdiX3Jzc2kgPSBs
ZTMyX3RvX2NwdShyeHZbOV0pOw0KKw0KKwkJZGV2LT50ZXN0Lmxhc3RfcmNwaVtpXSA9IHJjcGkg
JiAweGZmOw0KKwkJZGV2LT50ZXN0Lmxhc3RfaWJfcnNzaVtpXSA9IGliX3Jzc2kgJiAweGZmOw0K
KwkJZGV2LT50ZXN0Lmxhc3Rfd2JfcnNzaVtpXSA9IHdiX3Jzc2kgJiAweGZmOw0KKwl9DQorDQor
CXYyMCA9IGxlMzJfdG9fY3B1KHJ4dlsyMF0pOw0KKwl2MjEgPSBsZTMyX3RvX2NwdShyeHZbMjFd
KTsNCisNCisJZm9lID0gRklFTERfR0VUKE1UX0NSWFZfRk9FX0xPLCB2MjApIHwNCisJICAgICAg
KEZJRUxEX0dFVChNVF9DUlhWX0ZPRV9ISSwgdjIxKSA8PCBNVF9DUlhWX0ZPRV9TSElGVCk7DQor
DQorCXNuciA9IEZJRUxEX0dFVChNVF9DUlhWX1NOUiwgdjIwKSAtIDE2Ow0KKw0KKwlkZXYtPnRl
c3QubGFzdF9mcmVxX29mZnNldCA9IGZvZTsNCisJZGV2LT50ZXN0Lmxhc3Rfc25yID0gc25yOw0K
Kw0KKwlkZXZfa2ZyZWVfc2tiKHNrYik7DQorI2VuZGlmDQorfQ0KKw0KIHN0YXRpYyB1MTYNCiBt
dDc5MTVfbWFjX3R4X3JhdGVfdmFsKHN0cnVjdCBtdDc2X3BoeSAqbXBoeSwgdTggbW9kZSwgdTgg
cmF0ZV9pZHgsDQogCQkgICAgICAgdTggbnNzLCB1OCBzdGJjLCB1OCAqYncpDQpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9uZXQvd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9tdDc5MTUvbWFjLmggYi9kcml2
ZXJzL25ldC93aXJlbGVzcy9tZWRpYXRlay9tdDc2L210NzkxNS9tYWMuaA0KaW5kZXggMDkyMWI2
Zi4uZDQyMDM5MiAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvbmV0L3dpcmVsZXNzL21lZGlhdGVrL210
NzYvbXQ3OTE1L21hYy5oDQorKysgYi9kcml2ZXJzL25ldC93aXJlbGVzcy9tZWRpYXRlay9tdDc2
L210NzkxNS9tYWMuaA0KQEAgLTEyOCw2ICsxMjgsMTEgQEAgZW51bSByeF9wa3RfdHlwZSB7DQog
I2RlZmluZSBNVF9DUlhWX0hFX0JFQU1fQ0hORwkJQklUKDEzKQ0KICNkZWZpbmUgTVRfQ1JYVl9I
RV9ET1BQTEVSCQlCSVQoMTYpDQogDQorI2RlZmluZSBNVF9DUlhWX1NOUgkJR0VOTUFTSygxOCwg
MTMpDQorI2RlZmluZSBNVF9DUlhWX0ZPRV9MTwkJR0VOTUFTSygzMSwgMTkpDQorI2RlZmluZSBN
VF9DUlhWX0ZPRV9ISQkJR0VOTUFTSyg2LCAwKQ0KKyNkZWZpbmUgTVRfQ1JYVl9GT0VfU0hJRlQJ
MTMNCisNCiBlbnVtIHR4X2hlYWRlcl9mb3JtYXQgew0KIAlNVF9IRFJfRk9STUFUXzgwMl8zLA0K
IAlNVF9IRFJfRk9STUFUX0NNRCwNCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC93aXJlbGVzcy9t
ZWRpYXRlay9tdDc2L210NzkxNS9tdDc5MTUuaCBiL2RyaXZlcnMvbmV0L3dpcmVsZXNzL21lZGlh
dGVrL210NzYvbXQ3OTE1L210NzkxNS5oDQppbmRleCA2NzM1OTE1Li5mZDdkZTc5IDEwMDY0NA0K
LS0tIGEvZHJpdmVycy9uZXQvd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9tdDc5MTUvbXQ3OTE1LmgN
CisrKyBiL2RyaXZlcnMvbmV0L3dpcmVsZXNzL21lZGlhdGVrL210NzYvbXQ3OTE1L210NzkxNS5o
DQpAQCAtMTY1LDYgKzE2NSwxMiBAQCBzdHJ1Y3QgbXQ3OTE1X2RldiB7DQogCXN0cnVjdCB7DQog
CQl1MzIgKnJlZ19iYWNrdXA7DQogDQorCQlzMzIgbGFzdF9mcmVxX29mZnNldDsNCisJCXU4IGxh
c3RfcmNwaVs0XTsNCisJCXM4IGxhc3RfaWJfcnNzaVs0XTsNCisJCXM4IGxhc3Rfd2JfcnNzaVs0
XTsNCisJCXU4IGxhc3Rfc25yOw0KKw0KIAkJdTggc3BlX2lkeDsNCiAJfSB0ZXN0Ow0KICNlbmRp
Zg0KQEAgLTQzNiw2ICs0NDIsNyBAQCB2b2lkIG10NzkxNV9tYWNfd3JpdGVfdHh3aShzdHJ1Y3Qg
bXQ3OTE1X2RldiAqZGV2LCBfX2xlMzIgKnR4d2ksDQogCQkJICAgc3RydWN0IGllZWU4MDIxMV9r
ZXlfY29uZiAqa2V5LCBib29sIGJlYWNvbik7DQogdm9pZCBtdDc5MTVfbWFjX3NldF90aW1pbmco
c3RydWN0IG10NzkxNV9waHkgKnBoeSk7DQogaW50IG10NzkxNV9tYWNfZmlsbF9yeChzdHJ1Y3Qg
bXQ3OTE1X2RldiAqZGV2LCBzdHJ1Y3Qgc2tfYnVmZiAqc2tiKTsNCit2b2lkIG10NzkxNV9tYWNf
ZmlsbF9yeF92ZWN0b3Ioc3RydWN0IG10NzkxNV9kZXYgKmRldiwgc3RydWN0IHNrX2J1ZmYgKnNr
Yik7DQogdm9pZCBtdDc5MTVfbWFjX3R4X2ZyZWUoc3RydWN0IG10NzkxNV9kZXYgKmRldiwgc3Ry
dWN0IHNrX2J1ZmYgKnNrYik7DQogaW50IG10NzkxNV9tYWNfc3RhX2FkZChzdHJ1Y3QgbXQ3Nl9k
ZXYgKm1kZXYsIHN0cnVjdCBpZWVlODAyMTFfdmlmICp2aWYsDQogCQkgICAgICAgc3RydWN0IGll
ZWU4MDIxMV9zdGEgKnN0YSk7DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvd2lyZWxlc3MvbWVk
aWF0ZWsvbXQ3Ni9tdDc5MTUvdGVzdG1vZGUuYyBiL2RyaXZlcnMvbmV0L3dpcmVsZXNzL21lZGlh
dGVrL210NzYvbXQ3OTE1L3Rlc3Rtb2RlLmMNCmluZGV4IDBiOTBlY2IuLmMyZGQxOWQgMTAwNjQ0
DQotLS0gYS9kcml2ZXJzL25ldC93aXJlbGVzcy9tZWRpYXRlay9tdDc2L210NzkxNS90ZXN0bW9k
ZS5jDQorKysgYi9kcml2ZXJzL25ldC93aXJlbGVzcy9tZWRpYXRlay9tdDc2L210NzkxNS90ZXN0
bW9kZS5jDQpAQCAtMzEsNiArMzEsOCBAQCBzdGF0aWMgY29uc3Qgc3RydWN0IHJlZ19iYW5kIHJl
Z19iYWNrdXBfbGlzdFtdID0gew0KIAlSRUdfQkFORChUTUFDX0lDUjApLA0KIAlSRUdfQkFORF9J
RFgoQVJCX0RSTkdSMCwgMCksDQogCVJFR19CQU5EX0lEWChBUkJfRFJOR1IwLCAxKSwNCisJUkVH
X0JBTkQoV0ZfUkZDUiksDQorCVJFR19CQU5EKFdGX1JGQ1IxKSwNCiB9Ow0KIA0KIHN0YXRpYyBp
bnQNCkBAIC0xMTEsNiArMTEzLDEwIEBAIG10NzkxNV90bV9yZWdfYmFja3VwX3Jlc3RvcmUoc3Ry
dWN0IG10NzkxNV9kZXYgKmRldiwgc3RydWN0IG10NzkxNV9waHkgKnBoeSkNCiANCiAJbXQ3Nl93
cihkZXYsIE1UX1RNQUNfVEZDUjAoZXh0X3BoeSksIDApOw0KIAltdDc2X2NsZWFyKGRldiwgTVRf
VE1BQ19UQ1IwKGV4dF9waHkpLCBNVF9UTUFDX1RDUjBfVEJUVF9TVE9QX0NUUkwpOw0KKw0KKwkv
KiBjb25maWcgcnggZmlsdGVyIGZvciB0ZXN0bW9kZSByeCAqLw0KKwltdDc2X3dyKGRldiwgTVRf
V0ZfUkZDUihleHRfcGh5KSwgMHhjZjcwYSk7DQorCW10NzZfd3IoZGV2LCBNVF9XRl9SRkNSMShl
eHRfcGh5KSwgMCk7DQogfQ0KIA0KIHN0YXRpYyB2b2lkDQpAQCAtMTU2LDYgKzE2MiwyMCBAQCBt
dDc5MTVfdG1fc2V0X3R4X2ZyYW1lcyhzdHJ1Y3QgbXQ3OTE1X2RldiAqZGV2LCBib29sIGVuKQ0K
IAlpbmZvLT5jb250cm9sLnZpZiA9IGRldi0+cGh5Lm1vbml0b3JfdmlmOw0KIH0NCiANCitzdGF0
aWMgdm9pZA0KK210NzkxNV90bV9zZXRfcnhfZnJhbWVzKHN0cnVjdCBtdDc5MTVfZGV2ICpkZXYs
IGJvb2wgZW4pDQorew0KKwlpZiAoZW4pIHsNCisJCW11dGV4X3VubG9jaygmZGV2LT5tdDc2Lm11
dGV4KTsNCisJCW10NzkxNV9zZXRfY2hhbm5lbCgmZGV2LT5waHkpOw0KKwkJbXV0ZXhfbG9jaygm
ZGV2LT5tdDc2Lm11dGV4KTsNCisNCisJCW10NzkxNV9tY3Vfc2V0X2NoYW5faW5mbygmZGV2LT5w
aHksIE1DVV9FWFRfQ01EX1NFVF9SWF9QQVRIKTsNCisJfQ0KKw0KKwltdDc5MTVfdG1fc2V0X3Ry
eChkZXYsICZkZXYtPnBoeSwgVE1fTUFDX1JYX1JYViwgZW4pOw0KK30NCisNCiBzdGF0aWMgaW50
DQogbXQ3OTE1X3RtX3NldF9zdGF0ZShzdHJ1Y3QgbXQ3Nl9kZXYgKm1kZXYsIGVudW0gbXQ3Nl90
ZXN0bW9kZV9zdGF0ZSBzdGF0ZSkNCiB7DQpAQCAtMTY5LDEyICsxODksNjkgQEAgbXQ3OTE1X3Rt
X3NldF9zdGF0ZShzdHJ1Y3QgbXQ3Nl9kZXYgKm1kZXYsIGVudW0gbXQ3Nl90ZXN0bW9kZV9zdGF0
ZSBzdGF0ZSkNCiAJCW10NzkxNV90bV9zZXRfdHhfZnJhbWVzKGRldiwgZmFsc2UpOw0KIAllbHNl
IGlmIChzdGF0ZSA9PSBNVDc2X1RNX1NUQVRFX1RYX0ZSQU1FUykNCiAJCW10NzkxNV90bV9zZXRf
dHhfZnJhbWVzKGRldiwgdHJ1ZSk7DQorCWVsc2UgaWYgKHByZXZfc3RhdGUgPT0gTVQ3Nl9UTV9T
VEFURV9SWF9GUkFNRVMpDQorCQltdDc5MTVfdG1fc2V0X3J4X2ZyYW1lcyhkZXYsIGZhbHNlKTsN
CisJZWxzZSBpZiAoc3RhdGUgPT0gTVQ3Nl9UTV9TVEFURV9SWF9GUkFNRVMpDQorCQltdDc5MTVf
dG1fc2V0X3J4X2ZyYW1lcyhkZXYsIHRydWUpOw0KIAllbHNlIGlmIChwcmV2X3N0YXRlID09IE1U
NzZfVE1fU1RBVEVfT0ZGIHx8IHN0YXRlID09IE1UNzZfVE1fU1RBVEVfT0ZGKQ0KIAkJbXQ3OTE1
X3RtX2luaXQoZGV2KTsNCiANCiAJcmV0dXJuIDA7DQogfQ0KIA0KK3N0YXRpYyBpbnQNCittdDc5
MTVfdG1fZHVtcF9zdGF0cyhzdHJ1Y3QgbXQ3Nl9kZXYgKm1kZXYsIHN0cnVjdCBza19idWZmICpt
c2cpDQorew0KKwlzdHJ1Y3QgbXQ3OTE1X2RldiAqZGV2ID0gY29udGFpbmVyX29mKG1kZXYsIHN0
cnVjdCBtdDc5MTVfZGV2LCBtdDc2KTsNCisJdm9pZCAqcngsICpyc3NpOw0KKwlpbnQgaTsNCisN
CisJcnggPSBubGFfbmVzdF9zdGFydChtc2csIE1UNzZfVE1fU1RBVFNfQVRUUl9MQVNUX1JYKTsN
CisJaWYgKCFyeCkNCisJCXJldHVybiAtRU5PTUVNOw0KKw0KKwlpZiAobmxhX3B1dF9zMzIobXNn
LCBNVDc2X1RNX1JYX0FUVFJfRlJFUV9PRkZTRVQsIGRldi0+dGVzdC5sYXN0X2ZyZXFfb2Zmc2V0
KSkNCisJCXJldHVybiAtRU5PTUVNOw0KKw0KKwlyc3NpID0gbmxhX25lc3Rfc3RhcnQobXNnLCBN
VDc2X1RNX1JYX0FUVFJfUkNQSSk7DQorCWlmICghcnNzaSkNCisJCXJldHVybiAtRU5PTUVNOw0K
Kw0KKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShkZXYtPnRlc3QubGFzdF9yY3BpKTsgaSsr
KQ0KKwkJaWYgKG5sYV9wdXRfdTgobXNnLCBpLCBkZXYtPnRlc3QubGFzdF9yY3BpW2ldKSkNCisJ
CQlyZXR1cm4gLUVOT01FTTsNCisNCisJbmxhX25lc3RfZW5kKG1zZywgcnNzaSk7DQorDQorCXJz
c2kgPSBubGFfbmVzdF9zdGFydChtc2csIE1UNzZfVE1fUlhfQVRUUl9JQl9SU1NJKTsNCisJaWYg
KCFyc3NpKQ0KKwkJcmV0dXJuIC1FTk9NRU07DQorDQorCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9T
SVpFKGRldi0+dGVzdC5sYXN0X2liX3Jzc2kpOyBpKyspDQorCQlpZiAobmxhX3B1dF9zOChtc2cs
IGksIGRldi0+dGVzdC5sYXN0X2liX3Jzc2lbaV0pKQ0KKwkJCXJldHVybiAtRU5PTUVNOw0KKw0K
KwlubGFfbmVzdF9lbmQobXNnLCByc3NpKTsNCisNCisJcnNzaSA9IG5sYV9uZXN0X3N0YXJ0KG1z
ZywgTVQ3Nl9UTV9SWF9BVFRSX1dCX1JTU0kpOw0KKwlpZiAoIXJzc2kpDQorCQlyZXR1cm4gLUVO
T01FTTsNCisNCisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUoZGV2LT50ZXN0Lmxhc3Rfd2Jf
cnNzaSk7IGkrKykNCisJCWlmIChubGFfcHV0X3M4KG1zZywgaSwgZGV2LT50ZXN0Lmxhc3Rfd2Jf
cnNzaVtpXSkpDQorCQkJcmV0dXJuIC1FTk9NRU07DQorDQorCW5sYV9uZXN0X2VuZChtc2csIHJz
c2kpOw0KKw0KKwlpZiAobmxhX3B1dF91OChtc2csIE1UNzZfVE1fUlhfQVRUUl9TTlIsIGRldi0+
dGVzdC5sYXN0X3NucikpDQorCQlyZXR1cm4gLUVOT01FTTsNCisNCisJbmxhX25lc3RfZW5kKG1z
ZywgcngpOw0KKw0KKwlyZXR1cm4gMDsNCit9DQorDQogY29uc3Qgc3RydWN0IG10NzZfdGVzdG1v
ZGVfb3BzIG10NzkxNV90ZXN0bW9kZV9vcHMgPSB7DQogCS5zZXRfc3RhdGUgPSBtdDc5MTVfdG1f
c2V0X3N0YXRlLA0KKwkuZHVtcF9zdGF0cyA9IG10NzkxNV90bV9kdW1wX3N0YXRzLA0KIH07DQot
LSANCjIuMTcuMQ0K

