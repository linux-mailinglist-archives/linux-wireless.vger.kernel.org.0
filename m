Return-Path: <linux-wireless-owner@vger.kernel.org>
X-Original-To: lists+linux-wireless@lfdr.de
Delivered-To: lists+linux-wireless@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id C582183215
	for <lists+linux-wireless@lfdr.de>; Tue,  6 Aug 2019 15:04:17 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1729554AbfHFNEN (ORCPT <rfc822;lists+linux-wireless@lfdr.de>);
        Tue, 6 Aug 2019 09:04:13 -0400
Received: from mx2.suse.de ([195.135.220.15]:57316 "EHLO mx1.suse.de"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S1726092AbfHFNEN (ORCPT <rfc822;linux-wireless@vger.kernel.org>);
        Tue, 6 Aug 2019 09:04:13 -0400
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
        by mx1.suse.de (Postfix) with ESMTP id 05F04B061;
        Tue,  6 Aug 2019 13:04:10 +0000 (UTC)
Date:   Tue, 06 Aug 2019 15:04:10 +0200
Message-ID: <s5ho912momt.wl-tiwai@suse.de>
From:   Takashi Iwai <tiwai@suse.de>
To:     Luca Coelho <luca@coelho.fi>
Cc:     dor.shaish@intel.com, Josh Boyer <jwboyer@kernel.org>,
        Johannes Berg <johannes.berg@intel.com>,
        Emmanuel Grumbach <emmanuel.grumbach@intel.com>,
        linux-wireless@vger.kernel.org, linux-kernel@vger.kernel.org
Subject: Re: Regression with the latest iwlwifi-9260-*-46.ucode
In-Reply-To: <a394850acbe0f05d6428ce466ecac1cfaefadd59.camel@coelho.fi>
References: <s5hr26m9gvc.wl-tiwai@suse.de>
        <280dad08ba9864755c3c45ed3ce26d602fe18a49.camel@intel.com>
        <s5ho91pzyml.wl-tiwai@suse.de>
        <s5hwogcxwt4.wl-tiwai@suse.de>
        <b225d043d8581e0fec68cb63f7433161868293f3.camel@coelho.fi>
        <s5hmuh7xrqy.wl-tiwai@suse.de>
        <38635c1b10018859457787ecff4f92a3ceec34a4.camel@coelho.fi>
        <ef32cea91614b9708a474e223f3fbbb85a95501d.camel@coelho.fi>
        <s5hsgqgnczv.wl-tiwai@suse.de>
        <99462e51eda721d5d85d9ea9e2c28da62f8b54f5.camel@coelho.fi>
        <a394850acbe0f05d6428ce466ecac1cfaefadd59.camel@coelho.fi>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: linux-wireless-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-wireless.vger.kernel.org>
X-Mailing-List: linux-wireless@vger.kernel.org

On Mon, 05 Aug 2019 14:03:55 +0200,
Luca Coelho wrote:
> 
> On Mon, 2019-08-05 at 13:10 +0300, Luca Coelho wrote:
> > On Mon, 2019-08-05 at 12:05 +0200, Takashi Iwai wrote:
> > > On Mon, 05 Aug 2019 11:53:33 +0200,
> > > Luca Coelho wrote:
> > > > On Mon, 2019-08-05 at 12:48 +0300, Luca Coelho wrote:
> > > > > On Sun, 2019-07-21 at 18:43 +0200, Takashi Iwai wrote:
> > > > > > On Sat, 20 Jul 2019 22:49:33 +0200,
> > > > > > Luca Coelho wrote:
> > > > > > > On Sat, 2019-07-20 at 22:42 +0200, Takashi Iwai wrote:
> > > > > > > > On Fri, 19 Jul 2019 20:07:46 +0200,
> > > > > > > > Takashi Iwai wrote:
> > > > > > > > > On Fri, 19 Jul 2019 18:36:53 +0200,
> > > > > > > > > Luciano Coelho wrote:
> > > > > > > > > > Adding Dor.
> > > > > > > > > > 
> > > > > > > > > > Hi Takashi,
> > > > > > > > > > 
> > > > > > > > > > Do you have full logs of the crash? We can't see much from the log
> > > > > > > > > > snippet pasted in the bug report.
> > > > > > > > > 
> > > > > > > > > OK, I'll ask reporters.  If you have a SUSE/openSUSE bugzilla account,
> > > > > > > > > feel free to join there.
> > > > > > > > 
> > > > > > > > FYI, the dmesg's have been uploaded to the same bugzilla entry:
> > > > > > > >   https://bugzilla.opensuse.org/show_bug.cgi?id=1142128
> > > > > > > > 
> > > > > > > 
> > > > > > > Thanks!
> > > > > > > 
> > > > > > > BTW, I pushed new firmwares to our firmware tree in git.kernel.org
> > > > > > > today.  This is the patch:
> > > > > > > 
> > > > > > > https://git.kernel.org/pub/scm/linux/kernel/git/iwlwifi/linux-firmware.git/commit/?id=b5f09bb4f816abace0227d0f4e749859364cef6b
> > > > > > > 
> > > > > > > It would be great if you can try it out and let us know whether the problem is gone or not.
> > > > > > 
> > > > > > I created a test package and asked for testing.
> > > > > > The test result seems negative, showing the same error,
> > > > > > unfortunately.
> > > > > > 
> > > > > > The dmesg was uploaded on the bugzilla entry.
> > > > > 
> > > > > Thanks Takashi! We will look into them as soon as possible (sorry for
> > > > > the late reply, I just came back from vacations).
> > > > 
> > > > Actually, I just noticed that your bugzilla is closed as "RESOLVED
> > > > FIXED".  Is this still an issue?
> > > 
> > > It's "closed" because our package contains the revert.
> > > 
> > > > This seems like a mismatch between the WiFi and BT firmwares... And
> > > > most likely the same issue as this:
> > > > 
> > > > https://bugzilla.kernel.org/show_bug.cgi?id=202163
> > > 
> > > OK, so we need the update of the whole linux-firmware.
> > > I'll refresh the package and ask for testing.
> > 
> > I'm not sure the new BT firmware is in linux-firmware yet, since I
> > don't handle BT stuff.  I hope it is.
> 
> I just double-checked this and got confirmation that the latest BT
> firmware in linux-firmware.git is compatible with the latest WiFi
> firmware there as well.
> 
> The only caveat is that the machine needs to be cold-booted for it to
> work....
> 
> But we are taking steps to make sure this will not happen next time
> (i.e. for future hardware), by syncing our BT and WiFi firmware
> releases.

Now we got a feedback from the latest linux-firmware (20190726) and
surprising the result was negative.  The dmesg after the cold boot is
found at:
  https://bugzilla.suse.com/show_bug.cgi?id=1142128#c26

The kernel is 5.2.3, so it should be new enough.

If anything else needed (or something missing), let us know.


thanks,

Takashi
