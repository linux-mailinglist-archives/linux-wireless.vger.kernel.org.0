Return-Path: <linux-wireless-owner@vger.kernel.org>
X-Original-To: lists+linux-wireless@lfdr.de
Delivered-To: lists+linux-wireless@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id E71261A4402
	for <lists+linux-wireless@lfdr.de>; Fri, 10 Apr 2020 10:55:13 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726234AbgDJIzL (ORCPT <rfc822;lists+linux-wireless@lfdr.de>);
        Fri, 10 Apr 2020 04:55:11 -0400
Received: from mailgw01.mediatek.com ([210.61.82.183]:53015 "EHLO
        mailgw01.mediatek.com" rhost-flags-OK-FAIL-OK-FAIL) by vger.kernel.org
        with ESMTP id S1725914AbgDJIzJ (ORCPT
        <rfc822;linux-wireless@vger.kernel.org>);
        Fri, 10 Apr 2020 04:55:09 -0400
X-UUID: 4819c76c00374eecbc0aaaa710734381-20200410
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=mediatek.com; s=dk;
        h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-ID:Date:Subject:CC:To:From; bh=BsM8817neNBiTX9urNe5/f/vX/dLg2sfaMNigNb9qw0=;
        b=Bf6CeNeqadA1N7nC2E6e7FIe09VOuUOkU70mvgPDJca4EIBfP0EwxSTk42wJ3/XumXL6Y0ZeJljU4mj3orD/vD0ds/sa/HS3QB3D+RJ1BPTcAvjZ8yUwY0RecyQzXszjjTXRFflYrtCDUUwTsWVBOkVjOns0FMx3ZBHL6WADCK8=;
X-UUID: 4819c76c00374eecbc0aaaa710734381-20200410
Received: from mtkcas10.mediatek.inc [(172.21.101.39)] by mailgw01.mediatek.com
        (envelope-from <ryder.lee@mediatek.com>)
        (Cellopoint E-mail Firewall v4.1.10 Build 0809 with TLS)
        with ESMTP id 517792197; Fri, 10 Apr 2020 16:55:04 +0800
Received: from MTKCAS06.mediatek.inc (172.21.101.30) by
 mtkmbs02n2.mediatek.inc (172.21.101.101) with Microsoft SMTP Server (TLS) id
 15.0.1497.2; Fri, 10 Apr 2020 16:55:00 +0800
Received: from mtksdccf07.mediatek.inc (172.21.84.99) by MTKCAS06.mediatek.inc
 (172.21.101.73) with Microsoft SMTP Server id 15.0.1497.2 via Frontend
 Transport; Fri, 10 Apr 2020 16:55:00 +0800
From:   Ryder Lee <ryder.lee@mediatek.com>
To:     Felix Fietkau <nbd@nbd.name>,
        Lorenzo Bianconi <lorenzo.bianconi@redhat.com>
CC:     Shayne Chen <shayne.chen@mediatek.com>,
        YF Luo <yf.luo@mediatek.com>,
        Yiwei Chung <yiwei.chung@mediatek.com>,
        Chih-Min Chen <chih-min.chen@mediatek.com>,
        Evelyn Tsai <evelyn.tsai@mediatek.com>,
        Sean Wang <sean.wang@mediatek.com>,
        <linux-wireless@vger.kernel.org>,
        <linux-mediatek@lists.infradead.org>,
        Ryder Lee <ryder.lee@mediatek.com>
Subject: [PATCH 10/16] mt76: mt7915: add HE bss_conf support for interfaces
Date:   Fri, 10 Apr 2020 16:54:47 +0800
Message-ID: <4c91a0ccab5d3738e2a1313b449d8bcfdc204925.1586507878.git.ryder.lee@mediatek.com>
X-Mailer: git-send-email 2.18.0
In-Reply-To: <cover.1586507878.git.ryder.lee@mediatek.com>
References: <cover.1586507878.git.ryder.lee@mediatek.com>
MIME-Version: 1.0
Content-Type: text/plain
X-TM-SNTS-SMTP: CF1E86DD2669DABF03E97C68CCA4289B00A9028C444DB0FA8640293D4BFC39C02000:8
X-MTK:  N
Content-Transfer-Encoding: base64
Sender: linux-wireless-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-wireless.vger.kernel.org>
X-Mailing-List: linux-wireless@vger.kernel.org

QWRkIGJhc2ljIEhFIEJTUydzIGluZm8gZm9yIGludGVyZmFjZXMuIEFzIGZvciB0aGUgYWR2YW5j
ZWQgZmVhdHVyZXMNCndpbGwgYmUgYWRkZWQgZ3JhZHVhbGx5IGluIHRoZSBmdXR1cmUgcGF0Y2hl
cy4NCihpLmUuIEJTUyBjb2xvciwgVFdULCBzcGF0aWFsIHJldXNlIGFuZCBPRkRNQSkNCg0KU2ln
bmVkLW9mZi1ieTogUnlkZXIgTGVlIDxyeWRlci5sZWVAbWVkaWF0ZWsuY29tPg0KVGVzdGVkLWJ5
OiBTaGF5bmUgQ2hlbiA8c2hheW5lLmNoZW5AbWVkaWF0ZWsuY29tPg0KVGVzdGVkLWJ5OiBDaGlo
LU1pbiBDaGVuIDxjaGloLW1pbi5jaGVuQG1lZGlhdGVrLmNvbT4NClRlc3RlZC1ieTogRXZlbHlu
IFRzYWkgPGV2ZWx5bi50c2FpQG1lZGlhdGVrLmNvbT4NCkFja2VkLWJ5OiBZaXdlaSBDaHVuZyA8
eWl3ZWkuY2h1bmdAbWVkaWF0ZWsuY29tPg0KQWNrZWQtYnk6IFlGIEx1byA8eWYubHVvQG1lZGlh
dGVrLmNvbT4NCi0tLQ0KIC4uLi9uZXQvd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9tdDc5MTUvbWN1
LmMgICB8IDg5ICsrKysrKysrKysrKysrKysrKy0NCiAuLi4vbmV0L3dpcmVsZXNzL21lZGlhdGVr
L210NzYvbXQ3OTE1L21jdS5oICAgfCAxMSArKysNCiAyIGZpbGVzIGNoYW5nZWQsIDk5IGluc2Vy
dGlvbnMoKyksIDEgZGVsZXRpb24oLSkNCg0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L3dpcmVs
ZXNzL21lZGlhdGVrL210NzYvbXQ3OTE1L21jdS5jIGIvZHJpdmVycy9uZXQvd2lyZWxlc3MvbWVk
aWF0ZWsvbXQ3Ni9tdDc5MTUvbWN1LmMNCmluZGV4IDNjYzdiOTIzNGU5ZC4uNTQ5ZTE0NjBiMTg0
IDEwMDY0NA0KLS0tIGEvZHJpdmVycy9uZXQvd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9tdDc5MTUv
bWN1LmMNCisrKyBiL2RyaXZlcnMvbmV0L3dpcmVsZXNzL21lZGlhdGVrL210NzYvbXQ3OTE1L21j
dS5jDQpAQCAtNzQ2LDYgKzc0Niw0NyBAQCBtdDc5MTVfbWN1X2Jzc19vbWFjX3RsdihzdHJ1Y3Qg
c2tfYnVmZiAqc2tiLCBzdHJ1Y3QgaWVlZTgwMjExX3ZpZiAqdmlmKQ0KIAlvbWFjLT5od19ic3Nf
aWR4ID0gaWR4Ow0KIH0NCiANCitzdHJ1Y3QgbXQ3OTE1X2hlX29ic3NfbmFycm93X2J3X3J1X2Rh
dGEgew0KKwlib29sIHRvbGVyYXRlZDsNCit9Ow0KKw0KK3N0YXRpYyB2b2lkIG10NzkxNV9jaGVj
a19oZV9vYnNzX25hcnJvd19id19ydV9pdGVyKHN0cnVjdCB3aXBoeSAqd2lwaHksDQorCQkJCQkJ
ICAgc3RydWN0IGNmZzgwMjExX2JzcyAqYnNzLA0KKwkJCQkJCSAgIHZvaWQgKl9kYXRhKQ0KK3sN
CisJc3RydWN0IG10NzkxNV9oZV9vYnNzX25hcnJvd19id19ydV9kYXRhICpkYXRhID0gX2RhdGE7
DQorCWNvbnN0IHN0cnVjdCBlbGVtZW50ICplbGVtOw0KKw0KKwllbGVtID0gY2ZnODAyMTFfZmlu
ZF9lbGVtKFdMQU5fRUlEX0VYVF9DQVBBQklMSVRZLCBic3MtPmllcy0+ZGF0YSwNCisJCQkJICBi
c3MtPmllcy0+bGVuKTsNCisNCisJaWYgKCFlbGVtIHx8IGVsZW0tPmRhdGFsZW4gPCAxMCB8fA0K
KwkgICAgIShlbGVtLT5kYXRhWzEwXSAmDQorCSAgICAgIFdMQU5fRVhUX0NBUEExMF9PQlNTX05B
UlJPV19CV19SVV9UT0xFUkFOQ0VfU1VQUE9SVCkpDQorCQlkYXRhLT50b2xlcmF0ZWQgPSBmYWxz
ZTsNCit9DQorDQorc3RhdGljIGJvb2wgbXQ3OTE1X2NoZWNrX2hlX29ic3NfbmFycm93X2J3X3J1
KHN0cnVjdCBpZWVlODAyMTFfaHcgKmh3LA0KKwkJCQkJICAgICAgc3RydWN0IGllZWU4MDIxMV92
aWYgKnZpZikNCit7DQorCXN0cnVjdCBtdDc5MTVfaGVfb2Jzc19uYXJyb3dfYndfcnVfZGF0YSBp
dGVyX2RhdGEgPSB7DQorCQkudG9sZXJhdGVkID0gdHJ1ZSwNCisJfTsNCisNCisJaWYgKCEodmlm
LT5ic3NfY29uZi5jaGFuZGVmLmNoYW4tPmZsYWdzICYgSUVFRTgwMjExX0NIQU5fUkFEQVIpKQ0K
KwkJcmV0dXJuIGZhbHNlOw0KKw0KKwljZmc4MDIxMV9ic3NfaXRlcihody0+d2lwaHksICZ2aWYt
PmJzc19jb25mLmNoYW5kZWYsDQorCQkJICBtdDc5MTVfY2hlY2tfaGVfb2Jzc19uYXJyb3dfYndf
cnVfaXRlciwNCisJCQkgICZpdGVyX2RhdGEpOw0KKw0KKwkvKg0KKwkgKiBJZiB0aGVyZSBpcyBh
dCBsZWFzdCBvbmUgQVAgb24gcmFkYXIgY2hhbm5lbCB0aGF0IGNhbm5vdA0KKwkgKiB0b2xlcmF0
ZSAyNi10b25lIFJVIFVMIE9GRE1BIHRyYW5zbWlzc2lvbnMgdXNpbmcgSEUgVEIgUFBEVS4NCisJ
ICovDQorCXJldHVybiAhaXRlcl9kYXRhLnRvbGVyYXRlZDsNCit9DQorDQogc3RhdGljIHZvaWQN
CiBtdDc5MTVfbWN1X2Jzc19yZmNoX3RsdihzdHJ1Y3Qgc2tfYnVmZiAqc2tiLCBzdHJ1Y3QgaWVl
ZTgwMjExX3ZpZiAqdmlmLA0KIAkJCXN0cnVjdCBtdDc5MTVfcGh5ICpwaHkpDQpAQCAtNzY4LDcg
KzgwOSwyMCBAQCBtdDc5MTVfbWN1X2Jzc19yZmNoX3RsdihzdHJ1Y3Qgc2tfYnVmZiAqc2tiLCBz
dHJ1Y3QgaWVlZTgwMjExX3ZpZiAqdmlmLA0KIAkJY2gtPmNlbnRlcl9jaDEgPSBpZWVlODAyMTFf
ZnJlcXVlbmN5X3RvX2NoYW5uZWwoZnJlcTIpOw0KIAl9DQogDQotCWNoLT5oZV9hbGxfZGlzYWJs
ZSA9IHRydWU7DQorCWlmICh2aWYtPmJzc19jb25mLmhlX3N1cHBvcnQgJiYgdmlmLT50eXBlID09
IE5MODAyMTFfSUZUWVBFX1NUQVRJT04pIHsNCisJCXN0cnVjdCBtdDc5MTVfZGV2ICpkZXYgPSBw
aHktPmRldjsNCisJCXN0cnVjdCBtdDc2X3BoeSAqbXBoeSA9ICZkZXYtPm10NzYucGh5Ow0KKwkJ
Ym9vbCBleHRfcGh5ID0gcGh5ICE9ICZkZXYtPnBoeTsNCisNCisJCWlmIChleHRfcGh5ICYmIGRl
di0+bXQ3Ni5waHkyKQ0KKwkJCW1waHkgPSBkZXYtPm10NzYucGh5MjsNCisNCisJCWNoLT5oZV9y
dTI2X2Jsb2NrID0NCisJCQltdDc5MTVfY2hlY2tfaGVfb2Jzc19uYXJyb3dfYndfcnUobXBoeS0+
aHcsIHZpZik7DQorCQljaC0+aGVfYWxsX2Rpc2FibGUgPSBmYWxzZTsNCisJfSBlbHNlIHsNCisJ
CWNoLT5oZV9hbGxfZGlzYWJsZSA9IHRydWU7DQorCX0NCiB9DQogDQogc3RhdGljIHZvaWQNCkBA
IC03OTcsNiArODUxLDM2IEBAIG10NzkxNV9tY3VfYnNzX3JhX3RsdihzdHJ1Y3Qgc2tfYnVmZiAq
c2tiLCBzdHJ1Y3QgaWVlZTgwMjExX3ZpZiAqdmlmLA0KIAlyYS0+ZmFzdF9pbnRlcnZhbCA9IGNw
dV90b19sZTMyKDEwMCk7DQogfQ0KIA0KK3N0YXRpYyB2b2lkDQorbXQ3OTE1X21jdV9ic3NfaGVf
dGx2KHN0cnVjdCBza19idWZmICpza2IsIHN0cnVjdCBpZWVlODAyMTFfdmlmICp2aWYsDQorCQkg
ICAgICBzdHJ1Y3QgbXQ3OTE1X3BoeSAqcGh5KQ0KK3sNCisjZGVmaW5lIERFRkFVTFRfSEVfUEVf
RFVSQVRJT04JCTQNCisjZGVmaW5lIERFRkFVTFRfSEVfRFVSQVRJT05fUlRTX1RIUkVTCTEwMjMN
CisJc3RydWN0IGNmZzgwMjExX2NoYW5fZGVmICpjaGFuZGVmID0gJnBoeS0+bXQ3Ni0+Y2hhbmRl
ZjsNCisJZW51bSBubDgwMjExX2JhbmQgYmFuZCA9IGNoYW5kZWYtPmNoYW4tPmJhbmQ7DQorCXN0
cnVjdCBpZWVlODAyMTFfc3RhX2hlX2NhcCAqY2FwOw0KKwlzdHJ1Y3QgYnNzX2luZm9faGUgKmhl
Ow0KKwlzdHJ1Y3QgdGx2ICp0bHY7DQorDQorCWNhcCA9ICZwaHktPmRldi0+aWZ0eXBlW2JhbmRd
W3ZpZi0+dHlwZV0uaGVfY2FwOw0KKw0KKwl0bHYgPSBtdDc5MTVfbWN1X2FkZF90bHYoc2tiLCBC
U1NfSU5GT19IRV9CQVNJQywgc2l6ZW9mKCpoZSkpOw0KKw0KKwloZSA9IChzdHJ1Y3QgYnNzX2lu
Zm9faGUgKil0bHY7DQorCWhlLT5oZV9wZV9kdXJhdGlvbiA9IHZpZi0+YnNzX2NvbmYuaHRjX3Ry
aWdfYmFzZWRfcGt0X2V4dCAqIDQ7DQorCWlmICghaGUtPmhlX3BlX2R1cmF0aW9uKQ0KKwkJaGUt
PmhlX3BlX2R1cmF0aW9uID0gREVGQVVMVF9IRV9QRV9EVVJBVElPTjsNCisNCisJaGUtPmhlX3J0
c190aHJlcyA9IGNwdV90b19sZTE2KHZpZi0+YnNzX2NvbmYuZnJhbWVfdGltZV9ydHNfdGggKiAz
Mik7DQorCWlmICghaGUtPmhlX3J0c190aHJlcykNCisJCWhlLT5oZV9ydHNfdGhyZXMgPSBjcHVf
dG9fbGUxNihERUZBVUxUX0hFX0RVUkFUSU9OX1JUU19USFJFUyk7DQorDQorCWhlLT5tYXhfbnNz
X21jc1tDTURfSEVfTUNTX0JXODBdID0gY2FwLT5oZV9tY3NfbnNzX3N1cHAudHhfbWNzXzgwOw0K
KwloZS0+bWF4X25zc19tY3NbQ01EX0hFX01DU19CVzE2MF0gPSBjYXAtPmhlX21jc19uc3Nfc3Vw
cC50eF9tY3NfMTYwOw0KKwloZS0+bWF4X25zc19tY3NbQ01EX0hFX01DU19CVzgwODBdID0gY2Fw
LT5oZV9tY3NfbnNzX3N1cHAudHhfbWNzXzgwcDgwOw0KK30NCisNCiBzdGF0aWMgdm9pZA0KIG10
NzkxNV9tY3VfYnNzX2h3X2Ftc2R1X3RsdihzdHJ1Y3Qgc2tfYnVmZiAqc2tiKQ0KIHsNCkBAIC04
ODksNiArOTczLDkgQEAgaW50IG10NzkxNV9tY3VfYWRkX2Jzc19pbmZvKHN0cnVjdCBtdDc5MTVf
cGh5ICpwaHksDQogCQltdDc5MTVfbWN1X2Jzc19ibWNfdGx2KHNrYiwgcGh5KTsNCiAJCW10Nzkx
NV9tY3VfYnNzX3JhX3Rsdihza2IsIHZpZiwgcGh5KTsNCiANCisJCWlmICh2aWYtPmJzc19jb25m
LmhlX3N1cHBvcnQpDQorCQkJbXQ3OTE1X21jdV9ic3NfaGVfdGx2KHNrYiwgdmlmLCBwaHkpOw0K
Kw0KIAkJaWYgKHBoeS0+ZGV2LT5od190eF9hbXNkdSkNCiAJCQltdDc5MTVfbWN1X2Jzc19od19h
bXNkdV90bHYoc2tiKTsNCiANCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC93aXJlbGVzcy9tZWRp
YXRlay9tdDc2L210NzkxNS9tY3UuaCBiL2RyaXZlcnMvbmV0L3dpcmVsZXNzL21lZGlhdGVrL210
NzYvbXQ3OTE1L21jdS5oDQppbmRleCAwNTYzZTkzMjExNzUuLmIyZjM3Yjg3MTE3YyAxMDA2NDQN
Ci0tLSBhL2RyaXZlcnMvbmV0L3dpcmVsZXNzL21lZGlhdGVrL210NzYvbXQ3OTE1L21jdS5oDQor
KysgYi9kcml2ZXJzL25ldC93aXJlbGVzcy9tZWRpYXRlay9tdDc2L210NzkxNS9tY3UuaA0KQEAg
LTM5Niw2ICszOTYsMTcgQEAgc3RydWN0IGJzc19pbmZvX3JhIHsNCiAJX19sZTMyIGZhc3RfaW50
ZXJ2YWw7DQogfSBfX3BhY2tlZDsNCiANCisNCitzdHJ1Y3QgYnNzX2luZm9faGUgew0KKwlfX2xl
MTYgdGFnOw0KKwlfX2xlMTYgbGVuOw0KKwl1OCBoZV9wZV9kdXJhdGlvbjsNCisJdTggdmh0X29w
X2luZm9fcHJlc2VudDsNCisJX19sZTE2IGhlX3J0c190aHJlczsNCisJX19sZTE2IG1heF9uc3Nf
bWNzW0NNRF9IRV9NQ1NfQldfTlVNXTsNCisJdTggcnN2WzZdOw0KK30gX19wYWNrZWQ7DQorDQog
c3RydWN0IGJzc19pbmZvX2h3X2Ftc2R1IHsNCiAJX19sZTE2IHRhZzsNCiAJX19sZTE2IGxlbjsN
Ci0tIA0KMi4xOC4wDQo=

