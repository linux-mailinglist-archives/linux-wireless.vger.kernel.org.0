Return-Path: <linux-wireless+bounces-8452-lists+linux-wireless=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-wireless@lfdr.de
Delivered-To: lists+linux-wireless@lfdr.de
Received: from sy.mirrors.kernel.org (sy.mirrors.kernel.org [147.75.48.161])
	by mail.lfdr.de (Postfix) with ESMTPS id B9EAB8FA745
	for <lists+linux-wireless@lfdr.de>; Tue,  4 Jun 2024 02:57:59 +0200 (CEST)
Received: from smtp.subspace.kernel.org (wormhole.subspace.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by sy.mirrors.kernel.org (Postfix) with ESMTPS id 27462B23F3A
	for <lists+linux-wireless@lfdr.de>; Tue,  4 Jun 2024 00:57:57 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 8A13C6FD3;
	Tue,  4 Jun 2024 00:57:53 +0000 (UTC)
X-Original-To: linux-wireless@vger.kernel.org
Received: from rtits2.realtek.com.tw (rtits2.realtek.com [211.75.126.72])
	(using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
	(No client certificate requested)
	by smtp.subspace.kernel.org (Postfix) with ESMTPS id 1D90B652
	for <linux-wireless@vger.kernel.org>; Tue,  4 Jun 2024 00:57:50 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=211.75.126.72
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1717462673; cv=none; b=YewSAxh6gr4X5upUrlFVWWYcF4Ps3SJGl+TpEs9570vDNQd+XLGbr+S9oqcI3HLhBrhGpA9xsvqWI3pfjklbgd/fqmkIjJ4maD7NMEfQHAk6okVeCFTZ30ZZGZ8xnjldRQE7kJDrrUt7voML0SpnvLbjfKw5Pd9gJ2HXxGcsTw8=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1717462673; c=relaxed/simple;
	bh=Ep1F55yvxJQG3b4Ii0gMf7/RB9src+J9Toqj7yvV+x8=;
	h=From:To:CC:Subject:Date:Message-ID:References:In-Reply-To:
	 Content-Type:MIME-Version; b=m+888GbclGtDwAAixxno1tjDr7Bdzmljw37ihdLWrwJ3bMpk8FU+S/8JR/KiQ5f36Sog1CnMOqOhuzO/9PjtMxSZXzG6FRlXaHdAAiiusq0z6SMECgXhWyW40kfS/hWWRHTLFd2EmPo8sYQ6d0zmUtVyHN+C3KsmdMiYVyLM0h8=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dmarc=none (p=none dis=none) header.from=realtek.com; spf=pass smtp.mailfrom=realtek.com; arc=none smtp.client-ip=211.75.126.72
Authentication-Results: smtp.subspace.kernel.org; dmarc=none (p=none dis=none) header.from=realtek.com
Authentication-Results: smtp.subspace.kernel.org; spf=pass smtp.mailfrom=realtek.com
X-SpamFilter-By: ArmorX SpamTrap 5.78 with qID 4540vev973589075, This message is accepted by code: ctloc85258
Received: from mail.realtek.com (rtexh36505.realtek.com.tw[172.21.6.25])
	by rtits2.realtek.com.tw (8.15.2/2.95/5.92) with ESMTPS id 4540vev973589075
	(version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=OK);
	Tue, 4 Jun 2024 08:57:40 +0800
Received: from RTEXMBS05.realtek.com.tw (172.21.6.98) by
 RTEXH36505.realtek.com.tw (172.21.6.25) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.1.2507.39; Tue, 4 Jun 2024 08:57:40 +0800
Received: from RTEXMBS04.realtek.com.tw (172.21.6.97) by
 RTEXMBS05.realtek.com.tw (172.21.6.98) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.1.2507.35; Tue, 4 Jun 2024 08:57:40 +0800
Received: from RTEXMBS04.realtek.com.tw ([fe80::1a1:9ae3:e313:52e7]) by
 RTEXMBS04.realtek.com.tw ([fe80::1a1:9ae3:e313:52e7%5]) with mapi id
 15.01.2507.035; Tue, 4 Jun 2024 08:57:40 +0800
From: Ping-Ke Shih <pkshih@realtek.com>
To: =?utf-8?B?TWFyY2luIMWabHVzYXJ6?= <marcin.slusarz@gmail.com>,
        "linux-wireless@vger.kernel.org" <linux-wireless@vger.kernel.org>
CC: =?utf-8?B?TWFyY2luIMWabHVzYXJ6?= <mslusarz@renau.com>
Subject: RE: [PATCH] wifi: rtw88/usb: stop rx work before potential power off
Thread-Topic: [PATCH] wifi: rtw88/usb: stop rx work before potential power off
Thread-Index: AQHatcY9cRA6JA7pWkmRMPi3BJ9Af7G2xtwg
Date: Tue, 4 Jun 2024 00:57:40 +0000
Message-ID: <0063cfc3468f4203a2e5db43d949b10b@realtek.com>
References: <CA+GA0_v1rpoFrRVxpKpYqOrjdxEecn_m3+RKwxYc9H761dpMvw@mail.gmail.com>
 <20240603145535.1858856-1-marcin.slusarz@gmail.com>
In-Reply-To: <20240603145535.1858856-1-marcin.slusarz@gmail.com>
Accept-Language: en-US, zh-TW
Content-Language: zh-TW
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Precedence: bulk
X-Mailing-List: linux-wireless@vger.kernel.org
List-Id: <linux-wireless.vger.kernel.org>
List-Subscribe: <mailto:linux-wireless+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-wireless+unsubscribe@vger.kernel.org>
MIME-Version: 1.0

TWFyY2luIMWabHVzYXJ6IDxtYXJjaW4uc2x1c2FyekBnbWFpbC5jb20+IHdyb3RlOg0KPiBGcm9t
OiBNYXJjaW4gxZpsdXNhcnogPG1zbHVzYXJ6QHJlbmF1LmNvbT4NCj4gDQo+IEF2b2lkcyBXQVJO
X09OKCFsb2NhbC0+c3RhcnRlZCkgaW4gaWVlZTgwMjExX3J4X2xpc3QsIGFmdGVyDQo+IHRoZSBw
YXRjaCB0aGF0IGRpc2FibGVzIHBvd2VyIG1hbmFnZW1lbnQgb2YgODgyMUNVLg0KDQpQbGVhc2Ug
ZGVzY3JpYmUgaG93L3doYXQgeW91IGRvIGluIHRoaXMgcGF0Y2guIA0KDQo+IA0KPiBTaWduZWQt
b2ZmLWJ5OiBNYXJjaW4gxZpsdXNhcnogPG1zbHVzYXJ6QHJlbmF1LmNvbT4NCj4gLS0tDQo+ICBk
cml2ZXJzL25ldC93aXJlbGVzcy9yZWFsdGVrL3J0dzg4L2hjaS5oICB8IDEyICsrKysrKysNCj4g
IGRyaXZlcnMvbmV0L3dpcmVsZXNzL3JlYWx0ZWsvcnR3ODgvbWFpbi5jIHwgIDcgKysrLQ0KPiAg
ZHJpdmVycy9uZXQvd2lyZWxlc3MvcmVhbHRlay9ydHc4OC9wY2kuYyAgfCAgNiArKysrDQo+ICBk
cml2ZXJzL25ldC93aXJlbGVzcy9yZWFsdGVrL3J0dzg4L3NkaW8uYyB8ICA2ICsrKysNCj4gIGRy
aXZlcnMvbmV0L3dpcmVsZXNzL3JlYWx0ZWsvcnR3ODgvdXNiLmMgIHwgNDAgKysrKysrKysrKysr
KysrLS0tLS0tLS0NCj4gIGRyaXZlcnMvbmV0L3dpcmVsZXNzL3JlYWx0ZWsvcnR3ODgvdXNiLmgg
IHwgIDEgKw0KPiAgNiBmaWxlcyBjaGFuZ2VkLCA1OCBpbnNlcnRpb25zKCspLCAxNCBkZWxldGlv
bnMoLSkNCj4gDQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC93aXJlbGVzcy9yZWFsdGVrL3J0
dzg4L2hjaS5oIGIvZHJpdmVycy9uZXQvd2lyZWxlc3MvcmVhbHRlay9ydHc4OC9oY2kuaA0KPiBp
bmRleCA4MzBkNzUzMmYyYTMuLmQxYjM4YjM0ZmRkMCAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9u
ZXQvd2lyZWxlc3MvcmVhbHRlay9ydHc4OC9oY2kuaA0KPiArKysgYi9kcml2ZXJzL25ldC93aXJl
bGVzcy9yZWFsdGVrL3J0dzg4L2hjaS5oDQo+IEBAIC0xOCw2ICsxOCw4IEBAIHN0cnVjdCBydHdf
aGNpX29wcyB7DQo+ICAgICAgICAgdm9pZCAoKmRlZXBfcHMpKHN0cnVjdCBydHdfZGV2ICpydHdk
ZXYsIGJvb2wgZW50ZXIpOw0KPiAgICAgICAgIHZvaWQgKCpsaW5rX3BzKShzdHJ1Y3QgcnR3X2Rl
diAqcnR3ZGV2LCBib29sIGVudGVyKTsNCj4gICAgICAgICB2b2lkICgqaW50ZXJmYWNlX2NmZyko
c3RydWN0IHJ0d19kZXYgKnJ0d2Rldik7DQo+ICsgICAgICAgdm9pZCAoKnN0b3BfcngpKHN0cnVj
dCBydHdfZGV2ICpydHdkZXYpOw0KPiArICAgICAgIHZvaWQgKCpzdGFydF9yeCkoc3RydWN0IHJ0
d19kZXYgKnJ0d2Rldik7DQo+IA0KPiAgICAgICAgIGludCAoKndyaXRlX2RhdGFfcnN2ZF9wYWdl
KShzdHJ1Y3QgcnR3X2RldiAqcnR3ZGV2LCB1OCAqYnVmLCB1MzIgc2l6ZSk7DQo+ICAgICAgICAg
aW50ICgqd3JpdGVfZGF0YV9oMmMpKHN0cnVjdCBydHdfZGV2ICpydHdkZXYsIHU4ICpidWYsIHUz
MiBzaXplKTsNCj4gQEAgLTU3LDYgKzU5LDE2IEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBydHdfaGNp
X3N0b3Aoc3RydWN0IHJ0d19kZXYgKnJ0d2RldikNCj4gICAgICAgICBydHdkZXYtPmhjaS5vcHMt
PnN0b3AocnR3ZGV2KTsNCj4gIH0NCj4gDQo+ICtzdGF0aWMgaW5saW5lIHZvaWQgcnR3X2hjaV9z
dGFydF9yeChzdHJ1Y3QgcnR3X2RldiAqcnR3ZGV2KQ0KPiArew0KDQpGb3IgUENJL1NESU8gbm9w
LCBJIHdvdWxkIGxpa2UgdG8gZ2l2ZSB0aGVtIE5VTEwsIHNvIGhlcmUgY2FuIGJlDQoNCmlmIChy
dHdkZXYtPmhjaS5vcHMtPnN0YXJ0X3J4KQ0KCXJ0d2Rldi0+aGNpLm9wcy0+c3RhcnRfcngocnR3
ZGV2KTsNCg0KPiArICAgICAgIHJ0d2Rldi0+aGNpLm9wcy0+c3RhcnRfcngocnR3ZGV2KTsNCj4g
K30NCj4gKw0KPiArc3RhdGljIGlubGluZSB2b2lkIHJ0d19oY2lfc3RvcF9yeChzdHJ1Y3QgcnR3
X2RldiAqcnR3ZGV2KQ0KPiArew0KPiArICAgICAgIHJ0d2Rldi0+aGNpLm9wcy0+c3RvcF9yeChy
dHdkZXYpOw0KPiArfQ0KPiArDQo+ICBzdGF0aWMgaW5saW5lIHZvaWQgcnR3X2hjaV9kZWVwX3Bz
KHN0cnVjdCBydHdfZGV2ICpydHdkZXYsIGJvb2wgZW50ZXIpDQo+ICB7DQo+ICAgICAgICAgcnR3
ZGV2LT5oY2kub3BzLT5kZWVwX3BzKHJ0d2RldiwgZW50ZXIpOw0KPiBkaWZmIC0tZ2l0IGEvZHJp
dmVycy9uZXQvd2lyZWxlc3MvcmVhbHRlay9ydHc4OC9tYWluLmMgYi9kcml2ZXJzL25ldC93aXJl
bGVzcy9yZWFsdGVrL3J0dzg4L21haW4uYw0KPiBpbmRleCBhNDhlOTE5YWRkZGIuLmJiMDEyMmQx
OTQxNiAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9uZXQvd2lyZWxlc3MvcmVhbHRlay9ydHc4OC9t
YWluLmMNCj4gKysrIGIvZHJpdmVycy9uZXQvd2lyZWxlc3MvcmVhbHRlay9ydHc4OC9tYWluLmMN
Cj4gQEAgLTEzNTcsNyArMTM1Nyw3IEBAIHN0YXRpYyBpbnQgcnR3X3Bvd2VyX29uKHN0cnVjdCBy
dHdfZGV2ICpydHdkZXYpDQo+ICAgICAgICAgaW50IHJldDsNCj4gDQo+ICAgICAgICAgaWYgKHJ0
d2Rldi0+YWx3YXlzX3Bvd2VyX29uICYmIHRlc3RfYml0KFJUV19GTEFHX1BPV0VST04sIHJ0d2Rl
di0+ZmxhZ3MpKQ0KPiAtICAgICAgICAgICAgICAgcmV0dXJuIDA7DQo+ICsgICAgICAgICAgICAg
ICBnb3RvIHN1Y2Nlc3M7DQoNCnJ0d19oY2lfc3RhcnRfcngocnR3ZGV2KSBpcyBvbmx5IG5lZWRl
ZCBieSB0aGlzIGNhc2UsIHNvIA0KDQppZiAocnR3ZGV2LT5hbHdheXNfcG93ZXJfb24gJiYgdGVz
dF9iaXQoUlRXX0ZMQUdfUE9XRVJPTiwgcnR3ZGV2LT5mbGFncykpIHsNCglydHdfaGNpX3N0YXJ0
X3J4KHJ0d2Rldik7DQoJcmV0dXJuIDA7DQp9DQoNCj4gDQo+ICAgICAgICAgcmV0ID0gcnR3X2hj
aV9zZXR1cChydHdkZXYpOw0KPiAgICAgICAgIGlmIChyZXQpIHsNCj4gQEAgLTE0MDcsNiArMTQw
Nyw5IEBAIHN0YXRpYyBpbnQgcnR3X3Bvd2VyX29uKHN0cnVjdCBydHdfZGV2ICpydHdkZXYpDQo+
ICAgICAgICAgcnR3X2NvZXhfcG93ZXJfb25fc2V0dGluZyhydHdkZXYpOw0KPiAgICAgICAgIHJ0
d19jb2V4X2luaXRfaHdfY29uZmlnKHJ0d2Rldiwgd2lmaV9vbmx5KTsNCj4gDQo+ICtzdWNjZXNz
Og0KPiArICAgICAgIHJ0d19oY2lfc3RhcnRfcngocnR3ZGV2KTsNCj4gKw0KPiAgICAgICAgIHJl
dHVybiAwOw0KPiANCj4gIGVycl9vZmY6DQo+IEBAIC0xNTA5LDYgKzE1MTIsOCBAQCBpbnQgcnR3
X2NvcmVfc3RhcnQoc3RydWN0IHJ0d19kZXYgKnJ0d2RldikNCj4gDQo+ICBzdGF0aWMgdm9pZCBy
dHdfcG93ZXJfb2ZmKHN0cnVjdCBydHdfZGV2ICpydHdkZXYpDQo+ICB7DQo+ICsgICAgICAgcnR3
X2hjaV9zdG9wX3J4KHJ0d2Rldik7DQo+ICsNCg0KU2ltaWxhcmx5IGhlcmUgY2FuIGJlDQoNCmlm
IChydHdkZXYtPmFsd2F5c19wb3dlcl9vbikgew0KCXJ0d19oY2lfc3RvcF9yeChydHdkZXYpOw0K
CXJldHVybjsNCn0NCg0KDQo+ICAgICAgICAgaWYgKHJ0d2Rldi0+YWx3YXlzX3Bvd2VyX29uKQ0K
PiAgICAgICAgICAgICAgICAgcmV0dXJuOw0KPiANCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0
L3dpcmVsZXNzL3JlYWx0ZWsvcnR3ODgvcGNpLmMgYi9kcml2ZXJzL25ldC93aXJlbGVzcy9yZWFs
dGVrL3J0dzg4L3BjaS5jDQo+IGluZGV4IDdhMDkzZjNkNWY3NC4uMGEzZWM5NGY2YWIyIDEwMDY0
NA0KPiAtLS0gYS9kcml2ZXJzL25ldC93aXJlbGVzcy9yZWFsdGVrL3J0dzg4L3BjaS5jDQo+ICsr
KyBiL2RyaXZlcnMvbmV0L3dpcmVsZXNzL3JlYWx0ZWsvcnR3ODgvcGNpLmMNCj4gQEAgLTE1OTAs
NiArMTU5MCwxMCBAQCBzdGF0aWMgdm9pZCBydHdfcGNpX2Rlc3Ryb3koc3RydWN0IHJ0d19kZXYg
KnJ0d2Rldiwgc3RydWN0IHBjaV9kZXYgKnBkZXYpDQo+ICAgICAgICAgcnR3X3BjaV9pb191bm1h
cHBpbmcocnR3ZGV2LCBwZGV2KTsNCj4gIH0NCj4gDQo+ICtzdGF0aWMgdm9pZCBydHdfcGNpX25v
cChzdHJ1Y3QgcnR3X2RldiAqcnR3ZGV2KQ0KPiArew0KPiArfQ0KPiArDQo+ICBzdGF0aWMgc3Ry
dWN0IHJ0d19oY2lfb3BzIHJ0d19wY2lfb3BzID0gew0KPiAgICAgICAgIC50eF93cml0ZSA9IHJ0
d19wY2lfdHhfd3JpdGUsDQo+ICAgICAgICAgLnR4X2tpY2tfb2ZmID0gcnR3X3BjaV90eF9raWNr
X29mZiwNCj4gQEAgLTE2MDAsNiArMTYwNCw4IEBAIHN0YXRpYyBzdHJ1Y3QgcnR3X2hjaV9vcHMg
cnR3X3BjaV9vcHMgPSB7DQo+ICAgICAgICAgLmRlZXBfcHMgPSBydHdfcGNpX2RlZXBfcHMsDQo+
ICAgICAgICAgLmxpbmtfcHMgPSBydHdfcGNpX2xpbmtfcHMsDQo+ICAgICAgICAgLmludGVyZmFj
ZV9jZmcgPSBydHdfcGNpX2ludGVyZmFjZV9jZmcsDQo+ICsgICAgICAgLnN0b3BfcnggPSBydHdf
cGNpX25vcCwNCj4gKyAgICAgICAuc3RhcnRfcnggPSBydHdfcGNpX25vcCwNCj4gDQo+ICAgICAg
ICAgLnJlYWQ4ID0gcnR3X3BjaV9yZWFkOCwNCj4gICAgICAgICAucmVhZDE2ID0gcnR3X3BjaV9y
ZWFkMTYsDQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC93aXJlbGVzcy9yZWFsdGVrL3J0dzg4
L3NkaW8uYyBiL2RyaXZlcnMvbmV0L3dpcmVsZXNzL3JlYWx0ZWsvcnR3ODgvc2Rpby5jDQo+IGlu
ZGV4IDBjYWU1NzQ2ZjU0MC4uNGE3OTIzODUxYzgxIDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL25l
dC93aXJlbGVzcy9yZWFsdGVrL3J0dzg4L3NkaW8uYw0KPiArKysgYi9kcml2ZXJzL25ldC93aXJl
bGVzcy9yZWFsdGVrL3J0dzg4L3NkaW8uYw0KPiBAQCAtMTE0Nyw2ICsxMTQ3LDEwIEBAIHN0YXRp
YyB2b2lkIHJ0d19zZGlvX2RlY2xhaW0oc3RydWN0IHJ0d19kZXYgKnJ0d2RldiwNCj4gICAgICAg
ICBzZGlvX3JlbGVhc2VfaG9zdChzZGlvX2Z1bmMpOw0KPiAgfQ0KPiANCj4gK3N0YXRpYyB2b2lk
IHJ0d19zZGlvX25vcChzdHJ1Y3QgcnR3X2RldiAqcnR3ZGV2KQ0KPiArew0KPiArfQ0KPiArDQo+
ICBzdGF0aWMgc3RydWN0IHJ0d19oY2lfb3BzIHJ0d19zZGlvX29wcyA9IHsNCj4gICAgICAgICAu
dHhfd3JpdGUgPSBydHdfc2Rpb190eF93cml0ZSwNCj4gICAgICAgICAudHhfa2lja19vZmYgPSBy
dHdfc2Rpb190eF9raWNrX29mZiwNCj4gQEAgLTExNTYsNiArMTE2MCw4IEBAIHN0YXRpYyBzdHJ1
Y3QgcnR3X2hjaV9vcHMgcnR3X3NkaW9fb3BzID0gew0KPiAgICAgICAgIC5kZWVwX3BzID0gcnR3
X3NkaW9fZGVlcF9wcywNCj4gICAgICAgICAubGlua19wcyA9IHJ0d19zZGlvX2xpbmtfcHMsDQo+
ICAgICAgICAgLmludGVyZmFjZV9jZmcgPSBydHdfc2Rpb19pbnRlcmZhY2VfY2ZnLA0KPiArICAg
ICAgIC5zdG9wX3J4ID0gcnR3X3NkaW9fbm9wLA0KPiArICAgICAgIC5zdGFydF9yeCA9IHJ0d19z
ZGlvX25vcCwNCj4gDQo+ICAgICAgICAgLnJlYWQ4ID0gcnR3X3NkaW9fcmVhZDgsDQo+ICAgICAg
ICAgLnJlYWQxNiA9IHJ0d19zZGlvX3JlYWQxNiwNCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0
L3dpcmVsZXNzL3JlYWx0ZWsvcnR3ODgvdXNiLmMgYi9kcml2ZXJzL25ldC93aXJlbGVzcy9yZWFs
dGVrL3J0dzg4L3VzYi5jDQo+IGluZGV4IGUxYjY2ZjMzOWNjYS4uZDVjZjNlYjUxYzhhIDEwMDY0
NA0KPiAtLS0gYS9kcml2ZXJzL25ldC93aXJlbGVzcy9yZWFsdGVrL3J0dzg4L3VzYi5jDQo+ICsr
KyBiL2RyaXZlcnMvbmV0L3dpcmVsZXNzL3JlYWx0ZWsvcnR3ODgvdXNiLmMNCj4gQEAgLTcxNiw2
ICs3MTYsMzAgQEAgc3RhdGljIHZvaWQgcnR3X3VzYl9pbnRlcmZhY2VfY2ZnKHN0cnVjdCBydHdf
ZGV2ICpydHdkZXYpDQo+ICAgICAgICAgLyogZW1wdHkgZnVuY3Rpb24gZm9yIHJ0d19oY2lfb3Bz
ICovDQo+ICB9DQo+IA0KPiArc3RhdGljIHZvaWQgcnR3X3VzYl9zdG9wX3J4KHN0cnVjdCBydHdf
ZGV2ICpydHdkZXYpDQo+ICt7DQo+ICsgICAgICAgc3RydWN0IHJ0d191c2IgKnJ0d3VzYiA9IHJ0
d19nZXRfdXNiX3ByaXYocnR3ZGV2KTsNCg0KRG8gd2UgcmVhbGx5IG5lZWQgYSAnIHJ0d3VzYi0+
cnhfZW5hYmxlZCcgdG8gbWFpbnRhaW4gc3ltbWV0cmljIGNhbGxpbmcgb2YgDQpzdGFydC9zdG9w
X3J4PyBJZiB5ZXMsIGhlcmUgc2hvdWxkIGFkZA0KDQoJaWYgKCFydHd1c2ItPnJ4X2VuYWJsZWQp
DQoJCXJldHVybjsNCg0KQnV0LCBJIGRvbid0IGxpa2UgdGhhdCBmbGFnIGlmIGl0IGlzbid0IHN0
cm9uZ2x5IHJlcXVpcmVkLiANCg0KPiArICAgICAgIHJ0d191c2JfY2FuY2VsX3J4X2J1ZnMocnR3
dXNiKTsNCj4gKyAgICAgICBydHd1c2ItPnJ4X2VuYWJsZWQgPSBmYWxzZTsNCj4gK30NCj4gKw0K
PiArc3RhdGljIHZvaWQgcnR3X3VzYl9zdGFydF9yeChzdHJ1Y3QgcnR3X2RldiAqcnR3ZGV2KQ0K
PiArew0KPiArICAgICAgIHN0cnVjdCBydHdfdXNiICpydHd1c2IgPSBydHdfZ2V0X3VzYl9wcml2
KHJ0d2Rldik7DQo+ICsgICAgICAgaW50IGk7DQo+ICsNCj4gKyAgICAgICBpZiAocnR3dXNiLT5y
eF9lbmFibGVkKQ0KPiArICAgICAgICAgICAgICAgcmV0dXJuOw0KPiArDQo+ICsgICAgICAgZm9y
IChpID0gMDsgaSA8IFJUV19VU0JfUlhDQl9OVU07IGkrKykgew0KPiArICAgICAgICAgICAgICAg
c3RydWN0IHJ4X3VzYl9jdHJsX2Jsb2NrICpyeGNiID0gJnJ0d3VzYi0+cnhfY2JbaV07DQo+ICsN
Cj4gKyAgICAgICAgICAgICAgIHJ0d191c2JfcnhfcmVzdWJtaXQocnR3dXNiLCByeGNiKTsNCj4g
KyAgICAgICB9DQo+ICsNCj4gKyAgICAgICBydHd1c2ItPnJ4X2VuYWJsZWQgPSB0cnVlOw0KPiAr
fQ0KPiArDQo+ICBzdGF0aWMgc3RydWN0IHJ0d19oY2lfb3BzIHJ0d191c2Jfb3BzID0gew0KPiAg
ICAgICAgIC50eF93cml0ZSA9IHJ0d191c2JfdHhfd3JpdGUsDQo+ICAgICAgICAgLnR4X2tpY2tf
b2ZmID0gcnR3X3VzYl90eF9raWNrX29mZiwNCj4gQEAgLTcyNSw2ICs3NDksOCBAQCBzdGF0aWMg
c3RydWN0IHJ0d19oY2lfb3BzIHJ0d191c2Jfb3BzID0gew0KPiAgICAgICAgIC5kZWVwX3BzID0g
cnR3X3VzYl9kZWVwX3BzLA0KPiAgICAgICAgIC5saW5rX3BzID0gcnR3X3VzYl9saW5rX3BzLA0K
PiAgICAgICAgIC5pbnRlcmZhY2VfY2ZnID0gcnR3X3VzYl9pbnRlcmZhY2VfY2ZnLA0KPiArICAg
ICAgIC5zdG9wX3J4ID0gcnR3X3VzYl9zdG9wX3J4LA0KPiArICAgICAgIC5zdGFydF9yeCA9IHJ0
d191c2Jfc3RhcnRfcngsDQo+IA0KPiAgICAgICAgIC53cml0ZTggID0gcnR3X3VzYl93cml0ZTgs
DQo+ICAgICAgICAgLndyaXRlMTYgPSBydHdfdXNiX3dyaXRlMTYsDQo+IEBAIC03NTQsMTggKzc4
MCw2IEBAIHN0YXRpYyBpbnQgcnR3X3VzYl9pbml0X3J4KHN0cnVjdCBydHdfZGV2ICpydHdkZXYp
DQo+ICAgICAgICAgcmV0dXJuIDA7DQo+ICB9DQo+IA0KPiAtc3RhdGljIHZvaWQgcnR3X3VzYl9z
ZXR1cF9yeChzdHJ1Y3QgcnR3X2RldiAqcnR3ZGV2KQ0KPiAtew0KPiAtICAgICAgIHN0cnVjdCBy
dHdfdXNiICpydHd1c2IgPSBydHdfZ2V0X3VzYl9wcml2KHJ0d2Rldik7DQo+IC0gICAgICAgaW50
IGk7DQo+IC0NCj4gLSAgICAgICBmb3IgKGkgPSAwOyBpIDwgUlRXX1VTQl9SWENCX05VTTsgaSsr
KSB7DQo+IC0gICAgICAgICAgICAgICBzdHJ1Y3QgcnhfdXNiX2N0cmxfYmxvY2sgKnJ4Y2IgPSAm
cnR3dXNiLT5yeF9jYltpXTsNCj4gLQ0KPiAtICAgICAgICAgICAgICAgcnR3X3VzYl9yeF9yZXN1
Ym1pdChydHd1c2IsIHJ4Y2IpOw0KPiAtICAgICAgIH0NCj4gLX0NCj4gLQ0KPiAgc3RhdGljIHZv
aWQgcnR3X3VzYl9kZWluaXRfcngoc3RydWN0IHJ0d19kZXYgKnJ0d2RldikNCj4gIHsNCj4gICAg
ICAgICBzdHJ1Y3QgcnR3X3VzYiAqcnR3dXNiID0gcnR3X2dldF91c2JfcHJpdihydHdkZXYpOw0K
PiBAQCAtOTAzLDcgKzkxNyw3IEBAIGludCBydHdfdXNiX3Byb2JlKHN0cnVjdCB1c2JfaW50ZXJm
YWNlICppbnRmLCBjb25zdCBzdHJ1Y3QgdXNiX2RldmljZV9pZCAqaWQpDQo+ICAgICAgICAgICAg
ICAgICBnb3RvIGVycl9kZXN0cm95X3J4d3E7DQo+ICAgICAgICAgfQ0KPiANCj4gLSAgICAgICBy
dHdfdXNiX3NldHVwX3J4KHJ0d2Rldik7DQo+ICsgICAgICAgcnR3X3VzYl9zdGFydF9yeChydHdk
ZXYpOw0KPiANCj4gICAgICAgICByZXR1cm4gMDsNCj4gDQo+IGRpZmYgLS1naXQgYS9kcml2ZXJz
L25ldC93aXJlbGVzcy9yZWFsdGVrL3J0dzg4L3VzYi5oIGIvZHJpdmVycy9uZXQvd2lyZWxlc3Mv
cmVhbHRlay9ydHc4OC91c2IuaA0KPiBpbmRleCA4NjY5N2E1YzAxMDMuLmE2YjAwNGQ0Zjc0ZSAx
MDA2NDQNCj4gLS0tIGEvZHJpdmVycy9uZXQvd2lyZWxlc3MvcmVhbHRlay9ydHc4OC91c2IuaA0K
PiArKysgYi9kcml2ZXJzL25ldC93aXJlbGVzcy9yZWFsdGVrL3J0dzg4L3VzYi5oDQo+IEBAIC04
Miw2ICs4Miw3IEBAIHN0cnVjdCBydHdfdXNiIHsNCj4gICAgICAgICBzdHJ1Y3QgcnhfdXNiX2N0
cmxfYmxvY2sgcnhfY2JbUlRXX1VTQl9SWENCX05VTV07DQo+ICAgICAgICAgc3RydWN0IHNrX2J1
ZmZfaGVhZCByeF9xdWV1ZTsNCj4gICAgICAgICBzdHJ1Y3Qgd29ya19zdHJ1Y3Qgcnhfd29yazsN
Cj4gKyAgICAgICBib29sIHJ4X2VuYWJsZWQ7DQo+ICB9Ow0KPiANCj4gIHN0YXRpYyBpbmxpbmUg
c3RydWN0IHJ0d191c2JfdHhfZGF0YSAqcnR3X3VzYl9nZXRfdHhfZGF0YShzdHJ1Y3Qgc2tfYnVm
ZiAqc2tiKQ0KPiAtLQ0KPiAyLjI1LjENCj4gDQoNCg==

