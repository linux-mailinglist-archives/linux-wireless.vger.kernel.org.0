Return-Path: <linux-wireless-owner@vger.kernel.org>
X-Original-To: lists+linux-wireless@lfdr.de
Delivered-To: lists+linux-wireless@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 266D91CDFFB
	for <lists+linux-wireless@lfdr.de>; Mon, 11 May 2020 18:06:58 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1730645AbgEKQGx (ORCPT <rfc822;lists+linux-wireless@lfdr.de>);
        Mon, 11 May 2020 12:06:53 -0400
Received: from mailgw01.mediatek.com ([210.61.82.183]:62398 "EHLO
        mailgw01.mediatek.com" rhost-flags-OK-FAIL-OK-FAIL) by vger.kernel.org
        with ESMTP id S1730629AbgEKQGw (ORCPT
        <rfc822;linux-wireless@vger.kernel.org>);
        Mon, 11 May 2020 12:06:52 -0400
X-UUID: 196951d633444eba85822e347860f253-20200512
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=mediatek.com; s=dk;
        h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-ID:Date:Subject:CC:To:From; bh=KdEJCbD2s9K+W/vcfNTp8drNRu/seK7PZMooYFxkvME=;
        b=Y/pQrYPaXu8+OHLklpJczXGvPNPppCusQf+OkbbPPK9s6v5kgch7/sxnu3q7yj+fXgmT2UvBou7/23gLxGv7YKTqSpTXQr7uJ4E6lzLs1uIh8LW3bOdFdMIVrd6KJcxmfGwPUe3w853MURjM+GN+UaVPkjTBg+4O6tRfikg6nvw=;
X-UUID: 196951d633444eba85822e347860f253-20200512
Received: from mtkcas11.mediatek.inc [(172.21.101.40)] by mailgw01.mediatek.com
        (envelope-from <ryder.lee@mediatek.com>)
        (Cellopoint E-mail Firewall v4.1.10 Build 0809 with TLS)
        with ESMTP id 890246862; Tue, 12 May 2020 00:06:46 +0800
Received: from mtkcas07.mediatek.inc (172.21.101.84) by
 mtkmbs08n2.mediatek.inc (172.21.101.56) with Microsoft SMTP Server (TLS) id
 15.0.1497.2; Tue, 12 May 2020 00:06:41 +0800
Received: from mtksdccf07.mediatek.inc (172.21.84.99) by mtkcas07.mediatek.inc
 (172.21.101.73) with Microsoft SMTP Server id 15.0.1497.2 via Frontend
 Transport; Tue, 12 May 2020 00:06:40 +0800
From:   Ryder Lee <ryder.lee@mediatek.com>
To:     Felix Fietkau <nbd@nbd.name>,
        Lorenzo Bianconi <lorenzo.bianconi@redhat.com>
CC:     Shayne Chen <shayne.chen@mediatek.com>,
        Sean Wang <sean.wang@mediatek.com>,
        <linux-wireless@vger.kernel.org>,
        <linux-mediatek@lists.infradead.org>,
        Ryder Lee <ryder.lee@mediatek.com>
Subject: [PATCH 4/7] mt76: mt7915: add TxBF capabilities
Date:   Tue, 12 May 2020 00:06:35 +0800
Message-ID: <6b21733f3d01759ca71cc6c7b018b59482be879c.1589212457.git.ryder.lee@mediatek.com>
X-Mailer: git-send-email 2.18.0
In-Reply-To: <cover.1589212457.git.ryder.lee@mediatek.com>
References: <cover.1589212457.git.ryder.lee@mediatek.com>
MIME-Version: 1.0
Content-Type: text/plain
X-TM-SNTS-SMTP: 058D4E69D12599D3E898DA4ED4C7F5626ACAE910ADCFE90931D59D34A91244622000:8
X-MTK:  N
Content-Transfer-Encoding: base64
Sender: linux-wireless-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-wireless.vger.kernel.org>
X-Mailing-List: linux-wireless@vger.kernel.org

VGhpcyBhbGxvd3MgdG8gc2V0IEhFIFR4QkYgcnVudGltZSBzdHJlYW0gY2FwYWJpbGl0aWVzDQoN
ClNpZ25lZC1vZmYtYnk6IFJ5ZGVyIExlZSA8cnlkZXIubGVlQG1lZGlhdGVrLmNvbT4NClRlc3Rl
ZC1ieTogRXZlbHluIFRzYWkgPGV2ZWx5bi50c2FpQG1lZGlhdGVrLmNvbQ0KLS0tDQogLi4uL25l
dC93aXJlbGVzcy9tZWRpYXRlay9tdDc2L210NzkxNS9pbml0LmMgIHwgOTUgKysrKysrKysrKysr
KysrKysrLQ0KIC4uLi9uZXQvd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9tdDc5MTUvbWFpbi5jICB8
ICAxICsNCiAuLi4vd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9tdDc5MTUvbXQ3OTE1LmggICAgfCAg
MSArDQogMyBmaWxlcyBjaGFuZ2VkLCA5NSBpbnNlcnRpb25zKCspLCAyIGRlbGV0aW9ucygtKQ0K
DQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9tdDc5MTUv
aW5pdC5jIGIvZHJpdmVycy9uZXQvd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9tdDc5MTUvaW5pdC5j
DQppbmRleCAzNzIxYmQ2MzJiNGQuLmUyYjBlYTMzMDUzYyAxMDA2NDQNCi0tLSBhL2RyaXZlcnMv
bmV0L3dpcmVsZXNzL21lZGlhdGVrL210NzYvbXQ3OTE1L2luaXQuYw0KKysrIGIvZHJpdmVycy9u
ZXQvd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9tdDc5MTUvaW5pdC5jDQpAQCAtMjU5LDYgKzI1OSw5
NCBAQCBtdDc5MTVfaW5pdF93aXBoeShzdHJ1Y3QgaWVlZTgwMjExX2h3ICpodykNCiAJaHctPm1h
eF90eF9mcmFnbWVudHMgPSA0Ow0KIH0NCiANCit2b2lkIG10NzkxNV9zZXRfc3RyZWFtX3ZodF90
eGJmX2NhcHMoc3RydWN0IG10NzkxNV9waHkgKnBoeSkNCit7DQorCWludCBuc3MgPSBod2VpZ2h0
OChwaHktPmNoYWlubWFzayk7DQorCXUzMiAqY2FwID0gJnBoeS0+bXQ3Ni0+c2JhbmRfNWcuc2Jh
bmQudmh0X2NhcC5jYXA7DQorDQorCSpjYXAgfD0gSUVFRTgwMjExX1ZIVF9DQVBfU1VfQkVBTUZP
Uk1FRV9DQVBBQkxFIHwNCisJCUlFRUU4MDIxMV9WSFRfQ0FQX01VX0JFQU1GT1JNRUVfQ0FQQUJM
RSB8DQorCQkoMyA8PCBJRUVFODAyMTFfVkhUX0NBUF9CRUFNRk9STUVFX1NUU19TSElGVCk7DQor
DQorCSpjYXAgJj0gfihJRUVFODAyMTFfVkhUX0NBUF9TT1VORElOR19ESU1FTlNJT05TX01BU0sg
fA0KKwkJICBJRUVFODAyMTFfVkhUX0NBUF9TVV9CRUFNRk9STUVSX0NBUEFCTEUgfA0KKwkJICBJ
RUVFODAyMTFfVkhUX0NBUF9NVV9CRUFNRk9STUVSX0NBUEFCTEUpOw0KKw0KKwlpZiAobnNzIDwg
MikNCisJCXJldHVybjsNCisNCisJKmNhcCB8PSBJRUVFODAyMTFfVkhUX0NBUF9TVV9CRUFNRk9S
TUVSX0NBUEFCTEUgfA0KKwkJSUVFRTgwMjExX1ZIVF9DQVBfTVVfQkVBTUZPUk1FUl9DQVBBQkxF
IHwNCisJCUZJRUxEX1BSRVAoSUVFRTgwMjExX1ZIVF9DQVBfU09VTkRJTkdfRElNRU5TSU9OU19N
QVNLLA0KKwkJCSAgIG5zcyAtIDEpOw0KK30NCisNCitzdGF0aWMgdm9pZA0KK210NzkxNV9zZXRf
c3RyZWFtX2hlX3R4YmZfY2FwcyhzdHJ1Y3QgaWVlZTgwMjExX3N0YV9oZV9jYXAgKmhlX2NhcCwN
CisJCQkgICAgICAgaW50IHZpZiwgaW50IG5zcykNCit7DQorCXN0cnVjdCBpZWVlODAyMTFfaGVf
Y2FwX2VsZW0gKmVsZW0gPSAmaGVfY2FwLT5oZV9jYXBfZWxlbTsNCisJc3RydWN0IGllZWU4MDIx
MV9oZV9tY3NfbnNzX3N1cHAgKm1jcyA9ICZoZV9jYXAtPmhlX21jc19uc3Nfc3VwcDsNCisJdTgg
YzsNCisNCisjaWZkZWYgQ09ORklHX01BQzgwMjExX01FU0gNCisJaWYgKHZpZiA9PSBOTDgwMjEx
X0lGVFlQRV9NRVNIX1BPSU5UKQ0KKwkJcmV0dXJuOw0KKyNlbmRpZg0KKw0KKwllbGVtLT5waHlf
Y2FwX2luZm9bM10gJj0gfklFRUU4MDIxMV9IRV9QSFlfQ0FQM19TVV9CRUFNRk9STUVSOw0KKwll
bGVtLT5waHlfY2FwX2luZm9bNF0gJj0gfklFRUU4MDIxMV9IRV9QSFlfQ0FQNF9NVV9CRUFNRk9S
TUVSOw0KKw0KKwljID0gSUVFRTgwMjExX0hFX1BIWV9DQVA1X0JFQU1GT1JNRUVfTlVNX1NORF9E
SU1fVU5ERVJfODBNSFpfTUFTSyB8DQorCSAgICBJRUVFODAyMTFfSEVfUEhZX0NBUDVfQkVBTUZP
Uk1FRV9OVU1fU05EX0RJTV9BQk9WRV84ME1IWl9NQVNLOw0KKwllbGVtLT5waHlfY2FwX2luZm9b
NV0gJj0gfmM7DQorDQorCWMgPSBJRUVFODAyMTFfSEVfUEhZX0NBUDZfVFJJR19TVV9CRUFNRk9S
TUVSX0ZCIHwNCisJICAgIElFRUU4MDIxMV9IRV9QSFlfQ0FQNl9UUklHX01VX0JFQU1GT1JNRVJf
RkI7DQorCWVsZW0tPnBoeV9jYXBfaW5mb1s2XSAmPSB+YzsNCisNCisJZWxlbS0+cGh5X2NhcF9p
bmZvWzddICY9IH5JRUVFODAyMTFfSEVfUEhZX0NBUDdfTUFYX05DX01BU0s7DQorDQorCWMgPSBJ
RUVFODAyMTFfSEVfUEhZX0NBUDJfTkRQXzR4X0xURl9BTkRfM18yVVMgfA0KKwkgICAgSUVFRTgw
MjExX0hFX1BIWV9DQVAyX1VMX01VX0ZVTExfTVVfTUlNTyB8DQorCSAgICBJRUVFODAyMTFfSEVf
UEhZX0NBUDJfVUxfTVVfUEFSVElBTF9NVV9NSU1POw0KKwllbGVtLT5waHlfY2FwX2luZm9bMl0g
fD0gYzsNCisNCisJYyA9IElFRUU4MDIxMV9IRV9QSFlfQ0FQNF9TVV9CRUFNRk9STUVFIHwNCisJ
ICAgIElFRUU4MDIxMV9IRV9QSFlfQ0FQNF9CRUFNRk9STUVFX01BWF9TVFNfVU5ERVJfODBNSFpf
NCB8DQorCSAgICBJRUVFODAyMTFfSEVfUEhZX0NBUDRfQkVBTUZPUk1FRV9NQVhfU1RTX0FCT1ZF
XzgwTUhaXzQ7DQorCWVsZW0tPnBoeV9jYXBfaW5mb1s0XSB8PSBjOw0KKw0KKwkvKiBkbyBub3Qg
c3VwcG9ydCBORzE2IGR1ZSB0byBzcGVjIEQ0LjAgY2hhbmdlcyBzdWJjYXJyaWVyIGlkeCAqLw0K
KwljID0gSUVFRTgwMjExX0hFX1BIWV9DQVA2X0NPREVCT09LX1NJWkVfNDJfU1UgfA0KKwkgICAg
SUVFRTgwMjExX0hFX1BIWV9DQVA2X0NPREVCT09LX1NJWkVfNzVfTVU7DQorDQorCWlmICh2aWYg
PT0gTkw4MDIxMV9JRlRZUEVfU1RBVElPTikNCisJCWMgfD0gSUVFRTgwMjExX0hFX1BIWV9DQVA2
X1BBUlRJQUxfQkFORFdJRFRIX0RMX01VTUlNTzsNCisNCisJZWxlbS0+cGh5X2NhcF9pbmZvWzZd
IHw9IGM7DQorDQorCWlmIChuc3MgPCAyKQ0KKwkJcmV0dXJuOw0KKw0KKwlpZiAodmlmICE9IE5M
ODAyMTFfSUZUWVBFX0FQKQ0KKwkJcmV0dXJuOw0KKw0KKwllbGVtLT5waHlfY2FwX2luZm9bM10g
fD0gSUVFRTgwMjExX0hFX1BIWV9DQVAzX1NVX0JFQU1GT1JNRVI7DQorCWVsZW0tPnBoeV9jYXBf
aW5mb1s0XSB8PSBJRUVFODAyMTFfSEVfUEhZX0NBUDRfTVVfQkVBTUZPUk1FUjsNCisNCisJLyog
bnVtX3NuZF9kaW0gKi8NCisJYyA9IChuc3MgLSAxKSB8IChtYXhfdChpbnQsIG1jcy0+dHhfbWNz
XzE2MCwgMSkgPDwgMyk7DQorCWVsZW0tPnBoeV9jYXBfaW5mb1s1XSB8PSBjOw0KKw0KKwljID0g
SUVFRTgwMjExX0hFX1BIWV9DQVA2X1RSSUdfU1VfQkVBTUZPUk1FUl9GQiB8DQorCSAgICBJRUVF
ODAyMTFfSEVfUEhZX0NBUDZfVFJJR19NVV9CRUFNRk9STUVSX0ZCOw0KKwllbGVtLT5waHlfY2Fw
X2luZm9bNl0gfD0gYzsNCisNCisJLyogdGhlIG1heGltdW0gY2FwIGlzIDQgeCAzLCAoTnIsIE5j
KSA9ICgzLCAyKSAqLw0KKwllbGVtLT5waHlfY2FwX2luZm9bN10gfD0gbWluX3QoaW50LCBuc3Mg
LSAxLCAyKSA8PCAzOw0KK30NCisNCiBzdGF0aWMgdm9pZA0KIG10NzkxNV9nZW5fcHBlX3RocmVz
aCh1OCAqaGVfcHBldCkNCiB7DQpAQCAtMzUyLDExICs0NDAsMTAgQEAgbXQ3OTE1X2luaXRfaGVf
Y2FwcyhzdHJ1Y3QgbXQ3OTE1X3BoeSAqcGh5LCBlbnVtIG5sODAyMTFfYmFuZCBiYW5kLA0KIAkJ
aGVfY2FwX2VsZW0tPnBoeV9jYXBfaW5mb1sxXSA9DQogCQkJSUVFRTgwMjExX0hFX1BIWV9DQVAx
X0xEUENfQ09ESU5HX0lOX1BBWUxPQUQ7DQogCQloZV9jYXBfZWxlbS0+cGh5X2NhcF9pbmZvWzJd
ID0NCi0JCQlJRUVFODAyMTFfSEVfUEhZX0NBUDJfTkRQXzR4X0xURl9BTkRfM18yVVMgfA0KIAkJ
CUlFRUU4MDIxMV9IRV9QSFlfQ0FQMl9TVEJDX1RYX1VOREVSXzgwTUhaIHwNCiAJCQlJRUVFODAy
MTFfSEVfUEhZX0NBUDJfU1RCQ19SWF9VTkRFUl84ME1IWjsNCiANCi0JCS8qIFRPRE86IFR4QkYg
JiBNVSAmIE1FU0ggKi8NCisJCS8qIFRPRE86IE9GRE1BICovDQogDQogCQlzd2l0Y2ggKGkpIHsN
CiAJCWNhc2UgTkw4MDIxMV9JRlRZUEVfQVA6DQpAQCAtNDA3LDYgKzQ5NCw4IEBAIG10NzkxNV9p
bml0X2hlX2NhcHMoc3RydWN0IG10NzkxNV9waHkgKnBoeSwgZW51bSBubDgwMjExX2JhbmQgYmFu
ZCwNCiAJCWhlX21jcy0+cnhfbWNzXzgwcDgwID0gY3B1X3RvX2xlMTYobWNzX21hcCk7DQogCQlo
ZV9tY3MtPnR4X21jc184MHA4MCA9IGNwdV90b19sZTE2KG1jc19tYXApOw0KIA0KKwkJbXQ3OTE1
X3NldF9zdHJlYW1faGVfdHhiZl9jYXBzKGhlX2NhcCwgaSwgbnNzKTsNCisNCiAJCW1lbXNldCho
ZV9jYXAtPnBwZV90aHJlcywgMCwgc2l6ZW9mKGhlX2NhcC0+cHBlX3RocmVzKSk7DQogCQlpZiAo
aGVfY2FwX2VsZW0tPnBoeV9jYXBfaW5mb1s2XSAmDQogCQkgICAgSUVFRTgwMjExX0hFX1BIWV9D
QVA2X1BQRV9USFJFU0hPTERfUFJFU0VOVCkgew0KQEAgLTQ2NCw2ICs1NTMsNyBAQCBtdDc5MTVf
Y2FwX2RiZGNfZW5hYmxlKHN0cnVjdCBtdDc5MTVfZGV2ICpkZXYpDQogCWRldi0+bXBoeS5ody0+
d2lwaHktPmF2YWlsYWJsZV9hbnRlbm5hc190eCA9IGRldi0+cGh5LmNoYWlubWFzazsNCiANCiAJ
bXQ3Nl9zZXRfc3RyZWFtX2NhcHMoJmRldi0+bXBoeSwgdHJ1ZSk7DQorCW10NzkxNV9zZXRfc3Ry
ZWFtX3ZodF90eGJmX2NhcHMoJmRldi0+cGh5KTsNCiAJbXQ3OTE1X3NldF9zdHJlYW1faGVfY2Fw
cygmZGV2LT5waHkpOw0KIH0NCiANCkBAIC00ODAsNiArNTcwLDcgQEAgbXQ3OTE1X2NhcF9kYmRj
X2Rpc2FibGUoc3RydWN0IG10NzkxNV9kZXYgKmRldikNCiAJZGV2LT5tcGh5Lmh3LT53aXBoeS0+
YXZhaWxhYmxlX2FudGVubmFzX3R4ID0gZGV2LT5jaGFpbm1hc2s7DQogDQogCW10NzZfc2V0X3N0
cmVhbV9jYXBzKCZkZXYtPm1waHksIHRydWUpOw0KKwltdDc5MTVfc2V0X3N0cmVhbV92aHRfdHhi
Zl9jYXBzKCZkZXYtPnBoeSk7DQogCW10NzkxNV9zZXRfc3RyZWFtX2hlX2NhcHMoJmRldi0+cGh5
KTsNCiB9DQogDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3
Ni9tdDc5MTUvbWFpbi5jIGIvZHJpdmVycy9uZXQvd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9tdDc5
MTUvbWFpbi5jDQppbmRleCBmM2EzNzNmYzA3ZTUuLjE0N2FiN2RhN2FhOSAxMDA2NDQNCi0tLSBh
L2RyaXZlcnMvbmV0L3dpcmVsZXNzL21lZGlhdGVrL210NzYvbXQ3OTE1L21haW4uYw0KKysrIGIv
ZHJpdmVycy9uZXQvd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9tdDc5MTUvbWFpbi5jDQpAQCAtNzQ1
LDYgKzc0NSw3IEBAIG10NzkxNV9zZXRfYW50ZW5uYShzdHJ1Y3QgaWVlZTgwMjExX2h3ICpodywg
dTMyIHR4X2FudCwgdTMyIHJ4X2FudCkNCiAJcGh5LT5jaGFpbm1hc2sgPSB0eF9hbnQ7DQogDQog
CW10NzZfc2V0X3N0cmVhbV9jYXBzKHBoeS0+bXQ3NiwgdHJ1ZSk7DQorCW10NzkxNV9zZXRfc3Ry
ZWFtX3ZodF90eGJmX2NhcHMocGh5KTsNCiAJbXQ3OTE1X3NldF9zdHJlYW1faGVfY2FwcyhwaHkp
Ow0KIA0KIAltdXRleF91bmxvY2soJmRldi0+bXQ3Ni5tdXRleCk7DQpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9uZXQvd2lyZWxlc3MvbWVkaWF0ZWsvbXQ3Ni9tdDc5MTUvbXQ3OTE1LmggYi9kcml2ZXJz
L25ldC93aXJlbGVzcy9tZWRpYXRlay9tdDc2L210NzkxNS9tdDc5MTUuaA0KaW5kZXggMGQ1YjQ0
ODI5MmI1Li41MzdmYzEyNjI4OWYgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL25ldC93aXJlbGVzcy9t
ZWRpYXRlay9tdDc2L210NzkxNS9tdDc5MTUuaA0KKysrIGIvZHJpdmVycy9uZXQvd2lyZWxlc3Mv
bWVkaWF0ZWsvbXQ3Ni9tdDc5MTUvbXQ3OTE1LmgNCkBAIC00NTQsNiArNDU0LDcgQEAgdm9pZCBt
dDc5MTVfdHhwX3NrYl91bm1hcChzdHJ1Y3QgbXQ3Nl9kZXYgKmRldiwNCiBpbnQgbXQ3Nl9kZnNf
c3RhcnRfcmRkKHN0cnVjdCBtdDc5MTVfZGV2ICpkZXYsIGJvb2wgZm9yY2UpOw0KIGludCBtdDc5
MTVfZGZzX2luaXRfcmFkYXJfZGV0ZWN0b3Ioc3RydWN0IG10NzkxNV9waHkgKnBoeSk7DQogdm9p
ZCBtdDc5MTVfc2V0X3N0cmVhbV9oZV9jYXBzKHN0cnVjdCBtdDc5MTVfcGh5ICpwaHkpOw0KK3Zv
aWQgbXQ3OTE1X3NldF9zdHJlYW1fdmh0X3R4YmZfY2FwcyhzdHJ1Y3QgbXQ3OTE1X3BoeSAqcGh5
KTsNCiB2b2lkIG10NzkxNV91cGRhdGVfY2hhbm5lbChzdHJ1Y3QgbXQ3Nl9kZXYgKm1kZXYpOw0K
IGludCBtdDc5MTVfaW5pdF9kZWJ1Z2ZzKHN0cnVjdCBtdDc5MTVfZGV2ICpkZXYpOw0KICNpZmRl
ZiBDT05GSUdfTUFDODAyMTFfREVCVUdGUw0KLS0gDQoyLjE4LjANCg==

